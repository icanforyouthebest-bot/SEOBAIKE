<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SEOBAIKE ç”Ÿæ…‹åœˆ â€” AI å·¥å…· + å”ä½œå¹³å°ï¼Œå…¨éƒ¨å¹«ä½ åšäº‹</title>
<meta name="description" content="SEOBAIKE ç”Ÿæ…‹åœˆï¼š14 ç¨® AI èƒ½åŠ› + 26 å€‹å”ä½œå¹³å°ï¼Œå¯«æ–‡æ¡ˆã€åšåœ–ç‰‡ã€åˆ†ææ•¸æ“šã€ç®¡å°ˆæ¡ˆï¼Œå…¨éƒ¨ä¸€ç«™æå®š">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0a0a0f;--card:#12121a;--border:#1e1e2e;--accent:#e8850c;--accent2:#cc785c;--text:#e2e8f0;--dim:#64748b;--green:#22c55e;--red:#ef4444;--blue:#3b82f6}
body{background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;min-height:100vh}
.header{background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);border-bottom:1px solid var(--border);padding:20px 24px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px}
.header h1{font-size:24px;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.header .stats{display:flex;gap:16px;flex-wrap:wrap}
.stat{text-align:center;padding:8px 16px;background:var(--card);border-radius:8px;border:1px solid var(--border)}
.stat .num{font-size:24px;font-weight:700;color:var(--accent)}
.stat .label{font-size:11px;color:var(--dim);text-transform:uppercase}
.tabs{display:flex;gap:8px;padding:16px 24px;border-bottom:1px solid var(--border);flex-wrap:wrap}
.tab{padding:8px 20px;border-radius:20px;cursor:pointer;font-size:14px;border:1px solid var(--border);background:transparent;color:var(--dim);transition:.2s}
.tab.active,.tab:hover{background:var(--accent);color:#fff;border-color:var(--accent)}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:16px;padding:24px}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px;transition:.2s;position:relative;overflow:hidden}
.card:hover{border-color:var(--accent);transform:translateY(-2px)}
.card .badge{position:absolute;top:12px;right:12px;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600}
.badge.active{background:rgba(34,197,94,.15);color:var(--green)}
.badge.gpu{background:rgba(139,92,246,.15);color:var(--accent2)}
.badge.setup{background:rgba(239,68,68,.15);color:var(--red)}
.card h3{font-size:16px;margin-bottom:4px}
.card .provider{font-size:12px;color:var(--dim);margin-bottom:12px}
.card .caps{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}
.cap{padding:3px 8px;background:rgba(249,115,22,.1);border:1px solid rgba(249,115,22,.2);border-radius:6px;font-size:11px;color:var(--accent)}
.card .actions{display:flex;gap:8px}
.btn{padding:8px 16px;border-radius:8px;border:none;cursor:pointer;font-size:12px;font-weight:600;transition:.2s}
.btn-primary{background:var(--accent);color:#fff}
.btn-primary:hover{background:#ea580c}
.btn-secondary{background:var(--border);color:var(--text)}
.btn-secondary:hover{background:#2a2a3e}
.chat-panel{position:fixed;bottom:0;right:0;width:400px;max-height:600px;background:var(--card);border:1px solid var(--border);border-radius:12px 12px 0 0;display:none;flex-direction:column;z-index:100;box-shadow:0 -4px 24px rgba(0,0,0,.5)}
.chat-panel.open{display:flex}
.chat-header{padding:16px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.chat-header h3{font-size:14px}
.chat-messages{flex:1;overflow-y:auto;padding:16px;max-height:400px}
.msg{margin-bottom:12px;padding:10px 14px;border-radius:10px;font-size:13px;line-height:1.5;max-width:85%;word-wrap:break-word}
.msg.user{background:var(--accent);color:#fff;margin-left:auto}
.msg.bot{background:var(--border);color:var(--text)}
.msg .meta{font-size:10px;color:var(--dim);margin-top:4px}
.chat-input{display:flex;padding:12px;border-top:1px solid var(--border);gap:8px}
.chat-input input{flex:1;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--bg);color:var(--text);font-size:13px}
.chat-input input:focus{outline:none;border-color:var(--accent)}
/* BYOK ç°¡åŒ–æç¤º */
.byok-hint{padding:10px 16px;background:rgba(232,133,12,0.06);border-top:1px solid rgba(232,133,12,0.12);display:flex;align-items:center;gap:8px;font-size:12px;color:#aaa}
.byok-hint a{color:var(--accent);font-weight:600;text-decoration:none;white-space:nowrap}
.byok-hint a:hover{text-decoration:underline}
.chat-toggle{position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:24px;color:#fff;z-index:101;box-shadow:0 4px 12px rgba(249,115,22,.4)}
.loading{display:inline-block;width:12px;height:12px;border:2px solid var(--dim);border-top-color:var(--accent);border-radius:50%;animation:spin .6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.section-title{padding:24px 24px 8px;font-size:18px;font-weight:700;display:flex;align-items:center;gap:8px}
.section-title .count{font-size:13px;color:var(--dim);font-weight:400}
/* Ecosystem CTA */
.eco-cta{margin:24px;background:linear-gradient(135deg,#1a1a2e,#16213e);border:1px solid var(--border);border-radius:16px;padding:40px;text-align:center}
.eco-cta h2{font-size:26px;margin-bottom:8px}
.eco-cta h2 span{color:var(--accent)}
.eco-cta p{color:var(--dim);margin-bottom:24px;font-size:15px;max-width:600px;margin-left:auto;margin-right:auto}
.eco-cta-btn{display:inline-block;padding:14px 36px;border-radius:24px;background:linear-gradient(135deg,var(--accent),#cc785c);color:#fff;font-weight:700;font-size:16px;border:none;cursor:pointer;transition:all 0.3s;text-decoration:none}
.eco-cta-btn:hover{transform:scale(1.05);box-shadow:0 8px 30px rgba(249,115,22,0.3)}
/* Ecosystem Intro */
.eco-intro{padding:24px 24px 0;text-align:center}
.eco-intro p{color:var(--dim);font-size:15px;max-width:700px;margin:0 auto;line-height:1.7}
@media(max-width:600px){.grid{grid-template-columns:1fr;padding:12px}.header{padding:12px}.chat-panel{width:100%}}
</style>
<link rel="stylesheet" href="/assets/framer-style.css">
</head>
<body>

<nav style="position:sticky;top:0;z-index:100;background:rgba(10,10,15,.92);backdrop-filter:blur(16px);border-bottom:1px solid var(--border);padding:0 24px">
  <div style="max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;height:56px">
    <a href="/" style="font-size:20px;font-weight:800;background:linear-gradient(135deg,var(--accent),#cc785c);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none">SEOBAIKE</a>
    <div style="display:flex;gap:24px;align-items:center">
      <a href="/" style="color:var(--dim);font-size:14px;font-weight:500;text-decoration:none">é¦–é </a>
      <a href="/features" style="color:var(--dim);font-size:14px;font-weight:500;text-decoration:none">åŠŸèƒ½</a>
      <a href="/marketplace" style="color:var(--dim);font-size:14px;font-weight:500;text-decoration:none">å¸‚é›†</a>
      <a href="/pricing" style="color:var(--dim);font-size:14px;font-weight:500;text-decoration:none">æ–¹æ¡ˆ</a>
      <a href="/about" style="color:var(--dim);font-size:14px;font-weight:500;text-decoration:none">é—œæ–¼</a>
      <a href="/docs" style="color:var(--dim);font-size:14px;font-weight:500;text-decoration:none">å¸¸è¦‹å•é¡Œ</a>
      <a href="/login" style="color:var(--dim);font-size:14px;font-weight:500;text-decoration:none">ç™»å…¥</a>
    </div>
  </div>
</nav>

<div class="header">
  <div>
    <h1>SEOBAIKE ç”Ÿæ…‹åœˆ</h1>
    <div style="font-size:12px;color:var(--dim);margin-top:4px">ä½ çš„ AI å·¥å…·ç®± â€” å°è·¯å…‰æœ‰é™å…¬å¸ æ‰“é€ </div>
  </div>
  <div class="stats">
    <div class="stat"><div class="num" id="ai-count">0</div><div class="label">ç¨® AI èƒ½åŠ›</div></div>
    <div class="stat"><div class="num" id="platform-count">0</div><div class="label">å€‹å”ä½œå·¥å…·</div></div>
    <div class="stat"><div class="num" id="active-count">0</div><div class="label">å€‹å·²ä¸Šç·š</div></div>
  </div>
</div>

<div class="eco-intro">
  <p>SEOBAIKE ç”Ÿæ…‹åœˆæŠŠå„ç¨® AI èƒ½åŠ›å’Œå·¥ä½œå¹³å°ä¸²åœ¨ä¸€èµ·ï¼Œè®“ä½ åœ¨ä¸€å€‹åœ°æ–¹å°±èƒ½å®Œæˆæ‰€æœ‰äº‹æƒ… â€” å¯«æ–‡æ¡ˆã€åšåœ–ç‰‡ã€åˆ†æå ±è¡¨ã€ç®¡ç†å°ˆæ¡ˆã€è‡ªå‹•åŒ–æµç¨‹ï¼Œä¸ç”¨åˆ°è™•é–‹å¸³è™Ÿã€‚</p>
</div>

<div class="tabs">
  <div class="tab active" onclick="showTab('all')">å…¨éƒ¨</div>
  <div class="tab" onclick="showTab('ai')">AI èƒ½åŠ›</div>
  <div class="tab" onclick="showTab('collab')">å”ä½œå·¥å…·</div>
  <div class="tab" onclick="showTab('active')">å·²ä¸Šç·š</div>
</div>

<div class="section-title" id="ai-section">SEOBAIKE AI èƒ½åŠ› <span class="count" id="ai-section-count"></span></div>
<div class="grid" id="ai-grid"></div>

<div class="section-title" id="collab-section">SEOBAIKE å”ä½œå·¥å…· <span class="count" id="collab-section-count"></span></div>
<div class="grid" id="collab-grid"></div>

<!-- Chat Panel -->
<button class="chat-toggle" onclick="toggleChat()" title="AI å°è©±">ğŸ’¬</button>
<div class="chat-panel" id="chatPanel">
  <div class="chat-header">
    <h3>SEOBAIKE AI å°è©±</h3>
    <div style="display:flex;align-items:center;gap:8px">
      <select id="chatPartner" style="padding:4px 8px;border-radius:6px;border:1px solid var(--border);background:var(--bg);color:var(--text);font-size:12px">
        <option value="partner-openai">å…¨èƒ½åŠ©æ‰‹</option>
        <option value="partner-anthropic">æ·±åº¦åˆ†æ</option>
        <option value="partner-deepseek">é‚è¼¯æ¨ç†</option>
        <option value="partner-grok">å³æ™‚å•ç­”</option>
        <option value="partner-groq">é–ƒé›»å›è¦†</option>
        <option value="partner-mistral">å¤šèªç¿»è­¯</option>
        <option value="partner-google">å¤šæ¨¡æ…‹åŠ©æ‰‹</option>
        <option value="partner-cohere">èªæ„æœå°‹</option>
        <option value="partner-together">å‰µæ„å·¥åŠ</option>
        <option value="partner-huggingface">æ¨¡å‹å¸‚é›†</option>
        <option value="partner-perplexity">æœå°‹å•ç­”</option>
        <option value="partner-qwen">æ•¸å­¸å°ˆå®¶</option>
      </select>
      <button onclick="toggleChat()" style="background:none;border:none;color:var(--dim);cursor:pointer;font-size:18px">âœ•</button>
    </div>
  </div>
  <div class="chat-messages" id="chatMessages">
    <div class="msg bot">ä½ å¥½ï¼ä¸Šé¢é¸ä¸€å€‹ AI èƒ½åŠ›å°±èƒ½é–‹å§‹å°è©±ã€‚æƒ³å¯«æ–‡æ¡ˆé¸ã€Œå…¨èƒ½åŠ©æ‰‹ã€ï¼Œæƒ³æŸ¥è³‡æ–™é¸ã€Œæœå°‹å•ç­”ã€ï¼Œæƒ³ç®—æ•¸å­¸é¸ã€Œæ•¸å­¸å°ˆå®¶ã€ã€‚</div>
  </div>
  <div class="byok-hint">
    <span>&#128273;</span>
    <span>ç”¨è‡ªå·±çš„é‡‘é‘°è§£é–ç„¡é™ AI å°è©±</span>
    <a href="/ai#byok">å‰å¾€è¨­å®š &#8594;</a>
  </div>
  <div class="chat-input">
    <input type="text" id="chatInput" placeholder="è¼¸å…¥è¨Šæ¯..." onkeydown="if(event.key==='Enter')sendChat()">
    <button class="btn btn-primary" onclick="sendChat()">ç™¼é€</button>
  </div>
</div>

<section class="eco-cta">
  <h2>å…¨éƒ¨ä¸²åœ¨ä¸€èµ·ï¼Œ<span>ä¸€å€‹å¹³å°æå®š</span></h2>
  <p>ä¸ç”¨åˆ°è™•é–‹å¸³è™Ÿã€ä¸ç”¨è‡ªå·±æ¥ APIã€‚SEOBAIKE å¹«ä½ æŠŠ AI èƒ½åŠ›å’Œå·¥ä½œå·¥å…·ä¸²å¥½ï¼Œä½ åªè¦å°ˆå¿ƒåšäº‹å°±å¥½ã€‚</p>
  <a href="/marketplace" class="eco-cta-btn">å»å¸‚é›†é€›é€›</a>
</section>

<div style="text-align:center;padding:30px;color:#555;font-size:12px;border-top:1px solid var(--border);margin-top:20px">
  SEOBAIKE OS â€” <a href="/" style="color:var(--accent)">å°è·¯å…‰æœ‰é™å…¬å¸</a> â€” ä½ çš„ AI å·¥å…·ç®±
</div>

<script>
const BASE = 'https://vmyrivxxibqydccurxug.supabase.co/functions/v1';

const AI_PARTNERS = [
  { slug: 'partner-openai', name: 'SEOBAIKE å…¨èƒ½åŠ©æ‰‹', provider: 'SEOBAIKE AI', caps: ['å°è©±','æ–‡å­—åµŒå…¥','ç”Ÿåœ–','èªéŸ³','çœ‹åœ–ç†è§£'] },
  { slug: 'partner-anthropic', name: 'SEOBAIKE æ·±åº¦åˆ†æ', provider: 'SEOBAIKE AI', caps: ['å°è©±','çœ‹åœ–ç†è§£','å¯«ç¨‹å¼','è³‡æ–™åˆ†æ'] },
  { slug: 'partner-deepseek', name: 'SEOBAIKE é‚è¼¯æ¨ç†', provider: 'SEOBAIKE AI', caps: ['å°è©±','å¯«ç¨‹å¼','æ¨ç†æ€è€ƒ'] },
  { slug: 'partner-grok', name: 'SEOBAIKE å³æ™‚å•ç­”', provider: 'SEOBAIKE AI', caps: ['å°è©±','å¯«ç¨‹å¼','æ¨ç†æ€è€ƒ','çœ‹åœ–ç†è§£'] },
  { slug: 'partner-groq', name: 'SEOBAIKE é–ƒé›»å›è¦†', provider: 'SEOBAIKE AI', caps: ['å°è©±','æ¥µé€Ÿå›æ‡‰'] },
  { slug: 'partner-mistral', name: 'SEOBAIKE å¤šèªç¿»è­¯', provider: 'SEOBAIKE AI', caps: ['å°è©±','å¯«ç¨‹å¼','æ–‡å­—åµŒå…¥'] },
  { slug: 'partner-google', name: 'SEOBAIKE å¤šæ¨¡æ…‹åŠ©æ‰‹', provider: 'SEOBAIKE AI', caps: ['å°è©±','çœ‹åœ–ç†è§£','å¯«ç¨‹å¼'] },
  { slug: 'partner-perplexity', name: 'SEOBAIKE æœå°‹å•ç­”', provider: 'SEOBAIKE AI', caps: ['ç¶²è·¯æœå°‹','å°è©±','æ·±åº¦ç ”ç©¶'] },
  { slug: 'partner-cohere', name: 'SEOBAIKE èªæ„æœå°‹', provider: 'SEOBAIKE AI', caps: ['å°è©±','èªæ„åµŒå…¥','çµæœæ’åº'] },
  { slug: 'partner-together', name: 'SEOBAIKE å‰µæ„å·¥åŠ', provider: 'SEOBAIKE AI', caps: ['å°è©±','ç”Ÿåœ–','å¯«ç¨‹å¼'] },
  { slug: 'partner-huggingface', name: 'SEOBAIKE æ¨¡å‹å¸‚é›†', provider: 'SEOBAIKE AI', caps: ['å°è©±','æ¨¡å‹æ¨è«–','æ¨¡å‹åº«'] },
  { slug: 'partner-qwen', name: 'SEOBAIKE æ•¸å­¸å°ˆå®¶', provider: 'SEOBAIKE AI', caps: ['å°è©±','å¯«ç¨‹å¼','çœ‹åœ–ç†è§£','æ•¸å­¸é‹ç®—'] },
  { slug: 'partner-replicate', name: 'SEOBAIKE å½±éŸ³å‰µä½œ', provider: 'SEOBAIKE AI', caps: ['ç”Ÿåœ–','å½±ç‰‡','éŸ³è¨Š','æ–‡å­—'] },
  { slug: 'partner-stability', name: 'SEOBAIKE åœ–ç‰‡ç”Ÿæˆ', provider: 'SEOBAIKE AI', caps: ['AI ç¹ªåœ–','åœ–ç‰‡æ”¾å¤§'] },
];

const PLATFORMS = [
  { slug: 'connect-slack', name: 'SEOBAIKE åœ˜éšŠèŠå¤©å®¤', type: 'å³æ™‚è¨Šæ¯ï¼Œåœ˜éšŠæºé€š' },
  { slug: 'connect-github', name: 'SEOBAIKE ç¨‹å¼ç¢¼å€‰åº«', type: 'ç‰ˆæœ¬æ§åˆ¶ï¼Œå”ä½œé–‹ç™¼' },
  { slug: 'connect-notion', name: 'SEOBAIKE ç­†è¨˜çŸ¥è­˜åº«', type: 'æ–‡ä»¶æ•´ç†ï¼ŒçŸ¥è­˜ç®¡ç†' },
  { slug: 'connect-figma', name: 'SEOBAIKE ä»‹é¢è¨­è¨ˆ', type: 'ç•«é¢è¨­è¨ˆï¼Œåœ˜éšŠå”ä½œ' },
  { slug: 'connect-clickup', name: 'SEOBAIKE å°ˆæ¡ˆç¸½ç®¡', type: 'ä»»å‹™è¿½è¹¤ï¼Œæ™‚é–“ç®¡ç†' },
  { slug: 'connect-monday', name: 'SEOBAIKE å·¥ä½œçœ‹æ¿', type: 'é€²åº¦è¿½è¹¤ï¼Œåœ˜éšŠç®¡ç†' },
  { slug: 'connect-asana', name: 'SEOBAIKE ä»»å‹™åˆ†æ´¾', type: 'å¾…è¾¦äº‹é …ï¼Œåœ˜éšŠå”ä½œ' },
  { slug: 'connect-jira', name: 'SEOBAIKE é–‹ç™¼è¿½è¹¤', type: 'è»Ÿé«”é–‹ç™¼ï¼Œå•é¡Œè¿½è¹¤' },
  { slug: 'connect-miro', name: 'SEOBAIKE ç·šä¸Šç™½æ¿', type: 'è…¦åŠ›æ¿€ç›ªï¼Œè¦–è¦ºå”ä½œ' },
  { slug: 'connect-airtable', name: 'SEOBAIKE æ™ºæ…§è¡¨æ ¼', type: 'è³‡æ–™ç®¡ç†ï¼Œè‡ªå‹•åŒ–' },
  { slug: 'connect-trello', name: 'SEOBAIKE æ‹–æ‹‰çœ‹æ¿', type: 'å¡ç‰‡ç®¡ç†ï¼Œç°¡å–®å¥½ç”¨' },
  { slug: 'connect-hubspot', name: 'SEOBAIKE å®¢æˆ¶ç®¡ç†', type: 'å®¢æˆ¶é—œä¿‚ï¼Œè¡ŒéŠ·è¿½è¹¤' },
  { slug: 'connect-teams', name: 'SEOBAIKE ä¼æ¥­é€šè¨Š', type: 'è¦–è¨Šæœƒè­°ï¼Œä¼æ¥­æºé€š' },
  { slug: 'connect-google-workspace', name: 'SEOBAIKE é›²ç«¯è¾¦å…¬', type: 'æ–‡ä»¶è©¦ç®—ï¼Œé›²ç«¯å”ä½œ' },
  { slug: 'connect-confluence', name: 'SEOBAIKE åœ˜éšŠæ–‡ä»¶', type: 'çŸ¥è­˜åº«ï¼Œæ–‡ä»¶å…±ç·¨' },
  { slug: 'connect-canva', name: 'SEOBAIKE å¿«é€Ÿè¨­è¨ˆ', type: 'æµ·å ±ç°¡å ±ï¼Œä¸€éµç”Ÿæˆ' },
  { slug: 'connect-streamline', name: 'SEOBAIKE ä¾›æ‡‰éˆç®¡ç†', type: 'é€²éŠ·å­˜ï¼Œç‰©æµè¿½è¹¤' },
  { slug: 'connect-motiff', name: 'SEOBAIKE ä»‹é¢åŸå‹', type: 'ç•«é¢åŸå‹ï¼Œäº’å‹•è¨­è¨ˆ' },
  { slug: 'connect-mokahr', name: 'SEOBAIKE äººæ‰æ‹›å‹Ÿ', type: 'å±¥æ­·ç¯©é¸ï¼Œé¢è©¦æ’ç¨‹' },
  { slug: 'connect-linear', name: 'SEOBAIKE å•é¡Œè¿½è¹¤', type: 'å¾…ä¿®æ¸…å–®ï¼Œé–‹ç™¼æ’ç¨‹' },
  { slug: 'connect-basecamp', name: 'SEOBAIKE å°ˆæ¡ˆç‡Ÿåœ°', type: 'å°ˆæ¡ˆæºé€šï¼Œé€²åº¦å›å ±' },
  { slug: 'connect-coda', name: 'SEOBAIKE æ–‡ä»¶è‡ªå‹•åŒ–', type: 'æ™ºæ…§æ–‡ä»¶ï¼Œè‡ªå‹•æµç¨‹' },
  { slug: 'connect-zapier', name: 'SEOBAIKE è‡ªå‹•ä¸²æ¥', type: 'ä¸å¯«ç¨‹å¼ï¼Œè‡ªå‹•é€£çµå·¥å…·' },
  { slug: 'connect-n8n', name: 'SEOBAIKE é–‹æºè‡ªå‹•åŒ–', type: 'è‡ªå·±æ¶ï¼Œè‡ªå·±æ§åˆ¶æµç¨‹' },
  { slug: 'connect-pipedream', name: 'SEOBAIKE é–‹ç™¼è€…è‡ªå‹•åŒ–', type: 'å¯«è…³æœ¬ï¼Œä¸² API' },
  { slug: 'connect-svix', name: 'SEOBAIKE äº‹ä»¶é€šçŸ¥', type: 'è‡ªå‹•æ¨é€ï¼Œå³æ™‚é€šçŸ¥' },
];

let allStatuses = {};
let activeCount = 0;

function renderCard(item, type) {
  const status = allStatuses[item.slug];
  const isActive = status && (status.status === 'active' || status.status === 'live' || status.api_key_configured || status.gpu_fallback);
  const isGpu = status && (status.status === 'active_via_gpu' || status.gpu_fallback) && !status.api_key_configured && !status.key_configured;
  const badgeClass = isActive ? (isGpu ? 'gpu' : 'active') : 'setup';
  const badgeText = isActive ? (isGpu ? 'SEOBAIKE GPU' : 'é‹ä½œä¸­') : 'å¾…è¨­å®š';

  return `<div class="card" data-type="${type}" data-active="${isActive}">
    <span class="badge ${badgeClass}">${badgeText}</span>
    <h3>${item.name}</h3>
    <div class="provider">${item.provider || item.type || ''}</div>
    <div class="caps">${(item.caps || []).map(c => `<span class="cap">${c}</span>`).join('')}</div>
    <div class="actions">
      ${type === 'ai' ? `<button class="btn btn-primary" onclick="openChatWith('${item.slug}')">å°è©±</button>` : ''}
      <button class="btn btn-secondary" onclick="checkHealth('${item.slug}')">æª¢æŸ¥ç‹€æ…‹</button>
    </div>
  </div>`;
}

async function fetchStatus(slug) {
  try {
    const res = await fetch(`${BASE}/${slug}`, { signal: AbortSignal.timeout(5000) });
    if (res.ok) return await res.json();
  } catch {}
  return null;
}

async function loadAll() {
  const all = [...AI_PARTNERS.map(p => p.slug), ...PLATFORMS.map(p => p.slug)];
  const results = await Promise.allSettled(all.map(slug => fetchStatus(slug)));
  results.forEach((r, i) => {
    if (r.status === 'fulfilled' && r.value) allStatuses[all[i]] = r.value;
  });

  activeCount = Object.values(allStatuses).filter(s => s.status === 'active' || s.status === 'live' || s.status === 'active_via_gpu' || s.api_key_configured || s.gpu_fallback).length;

  document.getElementById('ai-count').textContent = AI_PARTNERS.length;
  document.getElementById('platform-count').textContent = PLATFORMS.length;
  document.getElementById('active-count').textContent = activeCount;
  document.getElementById('ai-section-count').textContent = `(${AI_PARTNERS.length} å€‹)`;
  document.getElementById('collab-section-count').textContent = `(${PLATFORMS.length} å€‹)`;

  document.getElementById('ai-grid').innerHTML = AI_PARTNERS.map(p => renderCard(p, 'ai')).join('');
  document.getElementById('collab-grid').innerHTML = PLATFORMS.map(p => renderCard(p, 'collab')).join('');
}

function showTab(tab) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
  const aiSection = document.getElementById('ai-section');
  const aiGrid = document.getElementById('ai-grid');
  const collabSection = document.getElementById('collab-section');
  const collabGrid = document.getElementById('collab-grid');

  aiSection.style.display = (tab === 'collab') ? 'none' : '';
  aiGrid.style.display = (tab === 'collab') ? 'none' : '';
  collabSection.style.display = (tab === 'ai') ? 'none' : '';
  collabGrid.style.display = (tab === 'ai') ? 'none' : '';

  if (tab === 'active') {
    document.querySelectorAll('.card').forEach(c => {
      c.style.display = c.dataset.active === 'true' ? '' : 'none';
    });
  } else {
    document.querySelectorAll('.card').forEach(c => c.style.display = '');
  }
}

function toggleChat() {
  document.getElementById('chatPanel').classList.toggle('open');
}

function openChatWith(slug) {
  document.getElementById('chatPartner').value = slug;
  document.getElementById('chatPanel').classList.add('open');
  document.getElementById('chatInput').focus();
}

async function sendChat() {
  const input = document.getElementById('chatInput');
  const msg = input.value.trim();
  if (!msg) return;
  input.value = '';

  const partner = document.getElementById('chatPartner').value;
  const msgsDiv = document.getElementById('chatMessages');

  msgsDiv.innerHTML += `<div class="msg user">${escHtml(msg)}</div>`;
  msgsDiv.innerHTML += `<div class="msg bot" id="typing"><div class="loading"></div> æ€è€ƒä¸­...</div>`;
  msgsDiv.scrollTop = msgsDiv.scrollHeight;

  try {
    // BYOKï¼šå¦‚æœç”¨æˆ¶æœ‰è‡ªå¸¶é‡‘é‘°ï¼Œåœ¨ header ä¸­é™„ä¸Š
    const byokKeys = JSON.parse(localStorage.getItem('seobaike_byok') || '{}');
    const byokProviderMap = {
      'partner-openai': 'openrouter', 'partner-anthropic': 'anthropic',
      'partner-deepseek': 'deepseek', 'partner-grok': 'openrouter',
      'partner-groq': 'groq', 'partner-mistral': 'mistral',
      'partner-google': 'google', 'partner-cohere': 'cohere',
      'partner-together': 'openrouter', 'partner-huggingface': 'openrouter',
      'partner-perplexity': 'perplexity', 'partner-qwen': 'openrouter',
      'partner-replicate': 'openrouter', 'partner-stability': 'openrouter'
    };
    const byokProv = byokProviderMap[partner] || '';
    const chatFetchHeaders = { 'Content-Type': 'application/json' };
    if (byokProv && byokKeys[byokProv]) {
      chatFetchHeaders['X-BYOK-Key'] = byokKeys[byokProv];
      chatFetchHeaders['X-BYOK-Provider'] = byokProv;
    }
    const res = await fetch(`${BASE}/${partner}/chat`, {
      method: 'POST',
      headers: chatFetchHeaders,
      body: JSON.stringify(partner === 'partner-perplexity'
        ? { messages: [{ role: 'user', content: msg }] }
        : { prompt: msg, max_tokens: 1024 }),
    });
    const data = await res.json();
    const reply = data.response || data.choices?.[0]?.message?.content || data.answer || JSON.stringify(data);
    const via = data.via ? ` (via ${data.via})` : '';
    const model = data.model || '';

    document.getElementById('typing').remove();
    msgsDiv.innerHTML += `<div class="msg bot">${escHtml(reply)}<div class="meta">${model}${via}</div></div>`;
  } catch (err) {
    document.getElementById('typing').remove();
    msgsDiv.innerHTML += `<div class="msg bot" style="color:var(--red)">Error: ${escHtml(err.message)}</div>`;
  }
  msgsDiv.scrollTop = msgsDiv.scrollHeight;
}

async function checkHealth(slug) {
  try {
    const res = await fetch(`${BASE}/${slug}`);
    const data = await res.json();
    alert(JSON.stringify(data, null, 2));
  } catch (err) {
    alert('Error: ' + err.message);
  }
}

function escHtml(s) { const d = document.createElement('div'); d.textContent = s; return d.innerHTML; }

loadAll();
</script>
<script>
(function(){
  try {
    var cfg = window.__SEOBAIKE__ || {};
    var sUrl = cfg.supabaseUrl || 'https://vmyrivxxibqydccurxug.supabase.co';
    var sKey = cfg.anonKey || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZteXJpdnh4aWJxeWRjY3VyeHVnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwNDAwMjksImV4cCI6MjA4NTYxNjAyOX0.iBV-23LGdm_uKffAExgqSV34-NWoAyv8_-M_cJQZ8Gg';
    fetch(sUrl + '/rest/v1/page_views', {
      method: 'POST',
      headers: { 'Content-Type':'application/json', 'apikey':sKey, 'Authorization':'Bearer '+sKey, 'Prefer':'return=minimal' },
      body: JSON.stringify({ path: location.pathname, referrer: document.referrer || null, user_agent: navigator.userAgent })
    }).catch(function(){});
  } catch(e){}
})();
</script>
<script src="/assets/smart-align.js"></script>
<script src="/seobaike-widget.js"></script>
</body>
</html>
