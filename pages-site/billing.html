<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>後付制帳單 — SEOBAIKE | 先用後付，月結帳單</title>
  <meta name="description" content="SEOBAIKE 後付制帳單系統，先用服務後付款。信用額度自動調整，月結帳單透明清楚。">
  <meta name="keywords" content="SEOBAIKE,後付制,帳單,SEO Points,信用制,月結帳單,AI 平台帳單">
  <link rel="canonical" href="https://aiforseo.vip/billing">
  <meta property="og:title" content="後付制帳單 — SEOBAIKE | 先用後付">
  <meta property="og:description" content="SEOBAIKE 後付制帳單系統。先用服務後付款，月結帳單透明清楚。">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://aiforseo.vip/billing">
  <meta property="og:image" content="/og-image.png">
  <meta property="og:site_name" content="SEOBAIKE">
  <meta property="og:locale" content="zh_TW">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="後付制帳單 — SEOBAIKE | 先用後付">
  <meta name="twitter:description" content="SEOBAIKE 後付制帳單系統。先用服務後付款，月結帳單透明清楚。">
  <meta name="theme-color" content="#06060f">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/og-image.png">
  <link rel="manifest" href="/manifest.json">

  <!-- Design System -->
  <link rel="stylesheet" href="/assets/design-system.css">
  <link rel="stylesheet" href="/assets/premium-fx.css">

  <style>
    /* ══════════════════════════════════════════
       Billing Page — Premium Overrides
       ══════════════════════════════════════════ */

    /* Hero */
    .billing-hero {
      padding: 140px 0 80px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .billing-hero::before {
      content: '';
      position: absolute;
      top: -200px;
      left: 50%;
      transform: translateX(-50%);
      width: 1000px;
      height: 1000px;
      background: radial-gradient(ellipse, rgba(232,133,12,0.06) 0%, transparent 65%);
      pointer-events: none;
    }
    .billing-hero h1 {
      margin-bottom: var(--sp-4);
    }
    .billing-hero .subtitle {
      font-size: 1.15rem;
      color: var(--text-muted);
      max-width: 560px;
      margin: 0 auto;
      line-height: 1.8;
    }

    /* ── Account Balance Cards ── */
    .balance-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--sp-6);
    }
    .balance-card {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-xl);
      padding: var(--sp-8) var(--sp-6);
      text-align: center;
      position: relative;
      overflow: hidden;
      transition: all var(--duration-normal) var(--ease-out);
    }
    .balance-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 15%;
      right: 15%;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(232,133,12,0.15), transparent);
      opacity: 0;
      transition: opacity var(--duration-normal);
    }
    .balance-card:hover {
      border-color: var(--border-hover);
      transform: translateY(-4px);
      box-shadow: var(--shadow-gold);
    }
    .balance-card:hover::before {
      opacity: 1;
    }
    .balance-card.featured {
      border-color: rgba(232,133,12,0.4);
      box-shadow: 0 0 0 1px rgba(232,133,12,0.15), var(--shadow-gold);
    }
    .balance-card.featured::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--gold-gradient);
    }
    .balance-icon {
      width: 52px;
      height: 52px;
      border-radius: var(--radius-lg);
      background: rgba(232,133,12,0.08);
      border: 1px solid rgba(232,133,12,0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto var(--sp-4);
    }
    .balance-label {
      font-size: 0.82rem;
      font-weight: 600;
      color: var(--text-muted);
      letter-spacing: 0.5px;
      margin-bottom: var(--sp-2);
    }
    .balance-value {
      font-size: 2rem;
      font-weight: 900;
      letter-spacing: -1px;
      line-height: 1.2;
    }
    .balance-value.text-gold {
      background: var(--gold-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .balance-unit {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-muted);
      margin-top: var(--sp-1);
    }

    /* ── Postpaid Plan Cards ── */
    .postpaid-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--sp-6);
      align-items: stretch;
    }
    .postpaid-card {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-xl);
      padding: var(--sp-10) var(--sp-8);
      display: flex;
      flex-direction: column;
      position: relative;
      transition: all var(--duration-normal) var(--ease-out);
      overflow: hidden;
    }
    .postpaid-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 15%;
      right: 15%;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(232,133,12,0.15), transparent);
      opacity: 0;
      transition: opacity var(--duration-normal);
    }
    .postpaid-card:hover {
      border-color: var(--border-hover);
      transform: translateY(-4px);
      box-shadow: var(--shadow-gold);
    }
    .postpaid-card:hover::before {
      opacity: 1;
    }
    .postpaid-card.featured {
      border-color: rgba(232,133,12,0.4);
      box-shadow: 0 0 0 1px rgba(232,133,12,0.15), var(--shadow-gold);
      background: var(--bg-card-hover);
    }
    .postpaid-card.featured::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--gold-gradient);
    }
    .postpaid-tier {
      font-size: 0.78rem;
      font-weight: 700;
      color: var(--gold-200);
      letter-spacing: 1.5px;
      text-transform: uppercase;
      margin-bottom: var(--sp-2);
    }
    .postpaid-card h3 {
      font-size: 1.5rem;
      margin-bottom: var(--sp-2);
    }
    .postpaid-desc {
      font-size: 0.88rem;
      color: var(--text-muted);
      margin-bottom: var(--sp-6);
      line-height: 1.6;
    }
    .postpaid-included {
      display: flex;
      align-items: center;
      gap: var(--sp-2);
      padding: var(--sp-3) var(--sp-4);
      background: rgba(232,133,12,0.06);
      border: 1px solid rgba(232,133,12,0.1);
      border-radius: var(--radius-md);
      margin-bottom: var(--sp-4);
      font-size: 0.88rem;
      font-weight: 600;
      color: var(--gold-200);
    }
    .postpaid-overage {
      display: flex;
      align-items: center;
      gap: var(--sp-2);
      padding: var(--sp-3) var(--sp-4);
      background: rgba(255,255,255,0.02);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      margin-bottom: var(--sp-6);
      font-size: 0.85rem;
      color: var(--text-secondary);
    }
    .postpaid-features {
      list-style: none;
      flex: 1;
      margin-bottom: var(--sp-8);
    }
    .postpaid-features li {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 7px 0;
      font-size: 0.88rem;
      color: var(--text-secondary);
      line-height: 1.5;
    }
    .postpaid-features .ck {
      color: var(--success);
      font-size: 0.82rem;
      font-weight: 700;
      flex-shrink: 0;
      margin-top: 2px;
    }
    .recommend-badge {
      position: absolute;
      top: 16px;
      right: 16px;
      background: var(--gold-gradient);
      color: #000;
      padding: 4px 14px;
      border-radius: var(--radius-full);
      font-size: 0.72rem;
      font-weight: 800;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }

    /* ── Topup / Purchase Section ── */
    .topup-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--sp-6);
      margin-bottom: var(--sp-8);
    }
    .topup-card {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-xl);
      padding: var(--sp-8) var(--sp-6);
      text-align: center;
      cursor: pointer;
      transition: all var(--duration-normal) var(--ease-out);
      position: relative;
      overflow: hidden;
    }
    .topup-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 15%;
      right: 15%;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(232,133,12,0.15), transparent);
      opacity: 0;
      transition: opacity var(--duration-normal);
    }
    .topup-card:hover {
      border-color: var(--border-hover);
      transform: translateY(-4px);
      box-shadow: var(--shadow-gold);
    }
    .topup-card:hover::before {
      opacity: 1;
    }
    .topup-card.selected {
      border-color: rgba(232,133,12,0.5);
      box-shadow: 0 0 0 2px rgba(232,133,12,0.2), var(--shadow-gold);
      background: var(--bg-card-hover);
    }
    .topup-card.popular {
      border-color: rgba(232,133,12,0.3);
    }
    .topup-popular-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: var(--gold-gradient);
      color: #000;
      padding: 3px 10px;
      border-radius: var(--radius-full);
      font-size: 0.68rem;
      font-weight: 800;
      letter-spacing: 0.5px;
    }
    .topup-sp {
      font-size: 2.2rem;
      font-weight: 900;
      letter-spacing: -1px;
      margin-bottom: var(--sp-1);
    }
    .topup-sp-label {
      font-size: 0.82rem;
      color: var(--text-muted);
      font-weight: 600;
      margin-bottom: var(--sp-4);
    }
    .topup-price {
      font-size: 1.3rem;
      font-weight: 800;
      color: var(--text-primary);
    }
    .topup-unit-price {
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-top: var(--sp-1);
    }

    /* Custom amount */
    .custom-topup {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-xl);
      padding: var(--sp-8);
      margin-bottom: var(--sp-8);
    }
    .custom-topup h4 {
      margin-bottom: var(--sp-4);
    }
    .custom-topup-row {
      display: flex;
      gap: var(--sp-4);
      align-items: flex-end;
    }
    .custom-topup-field {
      flex: 1;
    }
    .custom-topup-field label {
      display: block;
      font-size: 0.82rem;
      font-weight: 600;
      color: var(--text-muted);
      margin-bottom: var(--sp-2);
    }
    .custom-topup-result {
      display: flex;
      align-items: center;
      gap: var(--sp-4);
      padding: var(--sp-4) var(--sp-6);
      background: rgba(232,133,12,0.06);
      border: 1px solid rgba(232,133,12,0.1);
      border-radius: var(--radius-md);
      margin-top: var(--sp-4);
      font-size: 0.92rem;
      color: var(--gold-200);
      font-weight: 600;
    }

    /* Payment methods */
    .payment-methods {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--sp-4);
      margin-bottom: var(--sp-6);
    }
    .payment-method {
      display: flex;
      align-items: center;
      gap: var(--sp-3);
      padding: var(--sp-4) var(--sp-5);
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--duration-fast);
    }
    .payment-method:hover {
      border-color: var(--border-hover);
      background: var(--bg-card-hover);
    }
    .payment-method.selected {
      border-color: rgba(232,133,12,0.5);
      background: rgba(232,133,12,0.06);
    }
    .payment-method-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-sm);
      background: rgba(255,255,255,0.04);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    .payment-method-name {
      font-size: 0.88rem;
      font-weight: 600;
      color: var(--text-secondary);
    }
    .payment-method-radio {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      border: 2px solid var(--border-default);
      margin-left: auto;
      flex-shrink: 0;
      position: relative;
      transition: all var(--duration-fast);
    }
    .payment-method.selected .payment-method-radio {
      border-color: var(--gold-300);
    }
    .payment-method.selected .payment-method-radio::after {
      content: '';
      position: absolute;
      top: 3px;
      left: 3px;
      right: 3px;
      bottom: 3px;
      background: var(--gold-gradient);
      border-radius: 50%;
    }

    /* ── Billing History Table ── */
    .billing-table-wrap {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-xl);
      overflow: hidden;
    }
    .billing-table {
      width: 100%;
      border-collapse: collapse;
    }
    .billing-table thead {
      background: rgba(232,133,12,0.06);
    }
    .billing-table th {
      padding: var(--sp-4) var(--sp-5);
      font-size: 0.78rem;
      font-weight: 700;
      color: var(--text-muted);
      letter-spacing: 1px;
      text-transform: uppercase;
      text-align: left;
      border-bottom: 1px solid var(--border-subtle);
    }
    .billing-table td {
      padding: var(--sp-4) var(--sp-5);
      font-size: 0.88rem;
      color: var(--text-secondary);
      border-bottom: 1px solid var(--border-subtle);
    }
    .billing-table tbody tr {
      transition: background var(--duration-fast);
    }
    .billing-table tbody tr:hover {
      background: rgba(232,133,12,0.03);
    }
    .billing-table tbody tr:last-child td {
      border-bottom: none;
    }
    .status-paid {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 3px 10px;
      border-radius: var(--radius-full);
      background: rgba(52,208,88,0.1);
      color: var(--success);
      font-size: 0.78rem;
      font-weight: 700;
    }
    .status-pending {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 3px 10px;
      border-radius: var(--radius-full);
      background: rgba(240,180,41,0.1);
      color: var(--warning);
      font-size: 0.78rem;
      font-weight: 700;
    }

    /* ── Auto-Renew Settings ── */
    .settings-card {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-xl);
      padding: var(--sp-8);
    }
    .setting-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--sp-5) 0;
      border-bottom: 1px solid var(--border-subtle);
    }
    .setting-row:last-child {
      border-bottom: none;
    }
    .setting-info {
      flex: 1;
    }
    .setting-info h4 {
      font-size: 0.95rem;
      margin-bottom: var(--sp-1);
    }
    .setting-info p {
      font-size: 0.82rem;
      color: var(--text-muted);
      line-height: 1.6;
    }
    .setting-control {
      flex-shrink: 0;
      margin-left: var(--sp-6);
    }

    /* Toggle switch */
    .toggle {
      position: relative;
      width: 48px;
      height: 26px;
      display: inline-block;
    }
    .toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .toggle-slider {
      position: absolute;
      cursor: pointer;
      inset: 0;
      background: rgba(255,255,255,0.08);
      border-radius: var(--radius-full);
      transition: all var(--duration-normal);
      border: 1px solid var(--border-default);
    }
    .toggle-slider::before {
      content: '';
      position: absolute;
      height: 20px;
      width: 20px;
      left: 2px;
      bottom: 2px;
      background: var(--text-muted);
      border-radius: 50%;
      transition: all var(--duration-normal) var(--ease-out);
    }
    .toggle input:checked + .toggle-slider {
      background: rgba(232,133,12,0.2);
      border-color: var(--gold-300);
    }
    .toggle input:checked + .toggle-slider::before {
      transform: translateX(22px);
      background: var(--gold-200);
      box-shadow: 0 0 8px rgba(232,133,12,0.4);
    }

    /* Inline setting inputs */
    .setting-inline {
      display: flex;
      align-items: center;
      gap: var(--sp-3);
      margin-top: var(--sp-3);
    }
    .setting-inline .input {
      width: 100px;
      padding: 8px 12px;
      font-size: 0.85rem;
      text-align: center;
    }
    .setting-inline span {
      font-size: 0.85rem;
      color: var(--text-muted);
    }
    .email-input-row {
      display: flex;
      gap: var(--sp-3);
      margin-top: var(--sp-3);
      max-width: 400px;
    }
    .email-input-row .input {
      flex: 1;
    }

    /* ── Modal ── */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 10000;
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      align-items: center;
      justify-content: center;
    }
    .modal-overlay.open {
      display: flex;
    }
    .modal {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-xl);
      padding: var(--sp-10) var(--sp-8);
      max-width: 480px;
      width: 90%;
      position: relative;
      animation: modalIn 0.3s var(--ease-out);
    }
    @keyframes modalIn {
      from { opacity: 0; transform: scale(0.95) translateY(10px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }
    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      color: var(--text-muted);
      font-size: 1.5rem;
      cursor: pointer;
      padding: 4px 8px;
      line-height: 1;
      transition: color var(--duration-fast);
    }
    .modal-close:hover {
      color: var(--text-primary);
    }
    .modal h3 {
      margin-bottom: var(--sp-6);
    }
    .modal-summary {
      background: rgba(232,133,12,0.06);
      border: 1px solid rgba(232,133,12,0.1);
      border-radius: var(--radius-md);
      padding: var(--sp-5);
      margin-bottom: var(--sp-6);
    }
    .modal-summary-row {
      display: flex;
      justify-content: space-between;
      padding: var(--sp-2) 0;
      font-size: 0.9rem;
    }
    .modal-summary-row .label {
      color: var(--text-muted);
    }
    .modal-summary-row .value {
      color: var(--text-primary);
      font-weight: 700;
    }
    .modal-summary-row.total {
      border-top: 1px solid var(--border-subtle);
      margin-top: var(--sp-2);
      padding-top: var(--sp-3);
    }
    .modal-summary-row.total .value {
      font-size: 1.1rem;
      background: var(--gold-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .modal-actions {
      display: flex;
      gap: var(--sp-3);
    }
    .modal-actions .btn {
      flex: 1;
    }

    /* ── Btn Plan (reused from pricing) ── */
    .btn-plan {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      padding: 14px 24px;
      border-radius: var(--radius-full);
      font-size: 0.95rem;
      font-weight: 700;
      cursor: pointer;
      border: none;
      transition: all var(--duration-normal) var(--ease-out);
      text-decoration: none;
      font-family: var(--font-sans);
    }
    .btn-plan.primary {
      background: var(--gold-gradient);
      color: #000;
      box-shadow: 0 2px 16px rgba(232,133,12,0.25);
    }
    .btn-plan.primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 28px rgba(232,133,12,0.4);
      color: #000;
    }
    .btn-plan.outline {
      background: transparent;
      color: var(--text-primary);
      border: 1px solid var(--border-default);
    }
    .btn-plan.outline:hover {
      border-color: var(--border-hover);
      background: rgba(232,133,12,0.04);
      color: var(--text-primary);
    }

    /* ── How It Works (postpaid explainer) ── */
    .how-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--sp-6);
    }
    .how-card {
      text-align: center;
      padding: var(--sp-8) var(--sp-6);
    }
    .how-card-icon {
      width: 56px;
      height: 56px;
      border-radius: var(--radius-lg);
      background: rgba(232,133,12,0.08);
      border: 1px solid rgba(232,133,12,0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto var(--sp-4);
      font-size: 1.5rem;
    }
    .how-card h4 {
      margin-bottom: var(--sp-2);
    }
    .how-card p {
      font-size: 0.88rem;
      color: var(--text-muted);
      line-height: 1.7;
    }
    .how-step-num {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--gold-gradient);
      color: #000;
      font-size: 0.78rem;
      font-weight: 800;
      margin-bottom: var(--sp-3);
    }

    /* ══════ Responsive ══════ */
    @media (max-width: 1024px) {
      .balance-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .postpaid-grid {
        grid-template-columns: 1fr;
        max-width: 480px;
        margin-left: auto;
        margin-right: auto;
      }
      .topup-grid {
        grid-template-columns: 1fr;
        max-width: 400px;
        margin-left: auto;
        margin-right: auto;
      }
      .how-grid {
        grid-template-columns: 1fr;
        max-width: 400px;
        margin-left: auto;
        margin-right: auto;
      }
      .payment-methods {
        grid-template-columns: 1fr;
        max-width: 400px;
        margin-left: auto;
        margin-right: auto;
      }
    }
    @media (max-width: 768px) {
      .billing-hero {
        padding: 110px 0 50px;
      }
      .billing-hero .subtitle {
        font-size: 1rem;
      }
      .balance-grid {
        grid-template-columns: 1fr;
        max-width: 360px;
        margin-left: auto;
        margin-right: auto;
      }
      .billing-table-wrap {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }
      .billing-table {
        min-width: 600px;
      }
      .setting-row {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--sp-3);
      }
      .setting-control {
        margin-left: 0;
      }
      .custom-topup-row {
        flex-direction: column;
      }
      .email-input-row {
        flex-direction: column;
        max-width: 100%;
      }
      .modal {
        padding: var(--sp-8) var(--sp-6);
      }
    }
    @media (max-width: 480px) {
      .balance-value {
        font-size: 1.6rem;
      }
      .topup-sp {
        font-size: 1.8rem;
      }
    }
  </style>
</head>
<body class="page-top">

  <!-- ═══════ Navigation ═══════ -->
  <nav class="nav">
    <a href="/" class="nav-brand">
      <img src="/favicon.svg" alt="SEOBAIKE" width="34" height="34">
      <span class="seo">SEO</span><span class="baike">BAIKE</span>
    </a>
    <ul class="nav-links">
      <li><a href="/">首頁</a></li>
      <li><a href="/features">功能</a></li>
      <li><a href="/marketplace">市集</a></li>
      <li><a href="/pricing">方案</a></li>
      <li><a href="/billing" class="active">帳單</a></li>
      <li><a href="/about">關於</a></li>
      <li><a href="/docs">文件</a></li>
      <li><a href="/login" class="nav-cta">登入</a></li>
    </ul>
    <button class="nav-hamburger" onclick="toggleMenu()" aria-label="選單">
      <span></span><span></span><span></span>
    </button>
  </nav>

  <!-- Mobile Overlay -->
  <div class="mobile-overlay" id="mobileOverlay">
    <button class="mobile-close" onclick="toggleMenu()" aria-label="關閉選單">&times;</button>
    <a href="/" onclick="toggleMenu()">首頁</a>
    <a href="/features" onclick="toggleMenu()">功能</a>
    <a href="/marketplace" onclick="toggleMenu()">市集</a>
    <a href="/pricing" onclick="toggleMenu()">方案</a>
    <a href="/billing" onclick="toggleMenu()">帳單</a>
    <a href="/about" onclick="toggleMenu()">關於</a>
    <a href="/docs" onclick="toggleMenu()">文件</a>
    <a href="/login" onclick="toggleMenu()">登入</a>
  </div>


  <!-- ═══════ Hero ═══════ -->
  <section class="billing-hero">
    <div class="container fade-up">
      <div class="section-badge">BILLING</div>
      <h1 class="volcanic-title">後付制<span class="text-gold">帳單</span></h1>
      <p class="subtitle">先用服務，後付款。月結帳單透明清楚，<br>信用額度隨使用歷史自動調整。</p>
    </div>
  </section>


  <!-- ═══════ 1. Account Balance ═══════ -->
  <section class="section-sm">
    <div class="container">
      <div class="section-header fade-up">
        <div class="section-badge">ACCOUNT</div>
        <h2>帳戶<span class="text-gold">總覽</span></h2>
        <p>即時查看你的 SEO Points 餘額與本月使用狀況</p>
      </div>

      <div class="balance-grid fade-up">
        <!-- SP Balance -->
        <div class="balance-card featured">
          <div class="balance-icon">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="color:var(--gold-200)"><circle cx="12" cy="12" r="10"/><path d="M12 6v12M8 10l4-4 4 4"/></svg>
          </div>
          <div class="balance-label">目前 SEO Points 餘額</div>
          <div class="balance-value text-gold" id="spBalance">1,847</div>
          <div class="balance-unit">SP</div>
        </div>

        <!-- Monthly Usage -->
        <div class="balance-card">
          <div class="balance-icon">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="color:var(--gold-200)"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
          </div>
          <div class="balance-label">本月已使用量</div>
          <div class="balance-value" style="color:var(--text-primary)" id="monthUsage">1,253</div>
          <div class="balance-unit">SP</div>
        </div>

        <!-- Estimated Bill -->
        <div class="balance-card">
          <div class="balance-icon">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="color:var(--gold-200)"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>
          </div>
          <div class="balance-label">預估本月帳單</div>
          <div class="balance-value" style="color:var(--warning)" id="estimatedBill">NT$ 1,276</div>
          <div class="balance-unit">TWD</div>
        </div>

        <!-- Credit Limit -->
        <div class="balance-card">
          <div class="balance-icon">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="color:var(--gold-200)"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="M9 12l2 2 4-4"/></svg>
          </div>
          <div class="balance-label">信用額度（後付制）</div>
          <div class="balance-value" style="color:var(--success)" id="creditLimit">5,000</div>
          <div class="balance-unit">SP</div>
        </div>
      </div>
    </div>
  </section>

  <hr class="divider">

  <!-- ═══════ 2. Postpaid Plans ═══════ -->
  <section class="section" id="postpaid-plans">
    <div class="container">
      <div class="section-header fade-up">
        <div class="section-badge">POSTPAID</div>
        <h2>後付制<span class="text-gold">方案</span>說明</h2>
        <p>先用後付，月結帳單。信用額度根據使用歷史自動調整</p>
      </div>

      <!-- How It Works -->
      <div class="how-grid fade-up" style="margin-bottom:var(--sp-16)">
        <div class="card how-card">
          <div class="how-step-num">1</div>
          <div class="how-card-icon">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="color:var(--gold-200)"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
          </div>
          <h4>先用服務</h4>
          <p>直接使用 AI 服務與市集工具，系統自動記錄 SP 使用量，無需預先付款。</p>
        </div>
        <div class="card how-card">
          <div class="how-step-num">2</div>
          <div class="how-card-icon">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="color:var(--gold-200)"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="M12 6v6l4 2"/></svg>
          </div>
          <h4>月結帳單</h4>
          <p>每月月底結算使用量，產生帳單。帳單明細透明清楚，每筆使用都有記錄。</p>
        </div>
        <div class="card how-card">
          <div class="how-step-num">3</div>
          <div class="how-card-icon">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="color:var(--gold-200)"><path d="M9 12l2 2 4-4"/><circle cx="12" cy="12" r="10"/></svg>
          </div>
          <h4>額度自動提升</h4>
          <p>良好的付款記錄讓你的信用額度自動提升，使用愈多、信賴愈高。</p>
        </div>
      </div>

      <!-- Postpaid Tier Cards -->
      <div class="postpaid-grid fade-up">

        <!-- Free tier -->
        <div class="postpaid-card">
          <div class="postpaid-tier">FREE</div>
          <h3>免費方案</h3>
          <p class="postpaid-desc">體驗後付制，小量使用無壓力</p>

          <div class="postpaid-included">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l2 2"/></svg>
            每月 100 SP 免費
          </div>
          <div class="postpaid-overage">
            超出部分：NT$0.5 / SP
          </div>

          <ul class="postpaid-features">
            <li><span class="ck">&#10003;</span>先用後付，月結帳單</li>
            <li><span class="ck">&#10003;</span>基礎信用額度 500 SP</li>
            <li><span class="ck">&#10003;</span>帳單明細透明</li>
            <li><span class="ck">&#10003;</span>社群支援</li>
          </ul>

          <a href="/login" class="btn-plan outline seismic-shake">開始免費使用</a>
        </div>

        <!-- Professional tier -->
        <div class="postpaid-card featured magma-border lava-glow">
          <div class="recommend-badge">推薦方案</div>
          <div class="postpaid-tier">PROFESSIONAL</div>
          <h3>專業版</h3>
          <p class="postpaid-desc">適合個人創作者與中小企業的後付制方案</p>

          <div class="postpaid-included">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l2 2"/></svg>
            每月 2,000 SP 含在方案內
          </div>
          <div class="postpaid-overage">
            超出部分：NT$0.3 / SP
          </div>

          <ul class="postpaid-features">
            <li><span class="ck">&#10003;</span>免費方案所有功能</li>
            <li><span class="ck">&#10003;</span>信用額度 5,000 SP 起</li>
            <li><span class="ck">&#10003;</span>進階 AI 能力全開</li>
            <li><span class="ck">&#10003;</span>API 存取權限</li>
            <li><span class="ck">&#10003;</span>優先處理佇列</li>
            <li><span class="ck">&#10003;</span>Email 專屬客服</li>
          </ul>

          <button class="btn-plan primary seismic-shake" onclick="openModal('professional')">選擇專業版</button>
        </div>

        <!-- Enterprise tier -->
        <div class="postpaid-card">
          <div class="postpaid-tier">ENTERPRISE</div>
          <h3>企業版</h3>
          <p class="postpaid-desc">客製化額度與優惠，量大更划算</p>

          <div class="postpaid-included">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l2 2"/></svg>
            客製化 SP 額度
          </div>
          <div class="postpaid-overage">
            量大優惠，依合約議定
          </div>

          <ul class="postpaid-features">
            <li><span class="ck">&#10003;</span>專業版所有功能</li>
            <li><span class="ck">&#10003;</span>無上限信用額度</li>
            <li><span class="ck">&#10003;</span>白標方案支援</li>
            <li><span class="ck">&#10003;</span>SLA 服務等級協議</li>
            <li><span class="ck">&#10003;</span>專屬客戶經理</li>
            <li><span class="ck">&#10003;</span>客製化整合與部署</li>
          </ul>

          <a href="/contact" class="btn-plan outline seismic-shake">聯繫銷售團隊</a>
        </div>

      </div>
    </div>
  </section>

  <hr class="divider">

  <!-- ═══════ 3. Top-up / Purchase ═══════ -->
  <section class="section" id="topup">
    <div class="container">
      <div class="section-header fade-up">
        <div class="section-badge">TOP UP</div>
        <h2>儲值<span class="text-gold">加購</span></h2>
        <p>快速加購 SEO Points，即時入帳可用</p>
      </div>

      <!-- Quick top-up cards -->
      <div class="topup-grid fade-up">
        <div class="topup-card" onclick="selectTopup(this, 500, 200)">
          <div class="topup-sp text-gold">500</div>
          <div class="topup-sp-label">SEO Points</div>
          <div class="topup-price">NT$ 200</div>
          <div class="topup-unit-price">NT$0.40 / SP</div>
        </div>
        <div class="topup-card popular" onclick="selectTopup(this, 2000, 700)">
          <div class="topup-popular-badge">熱門</div>
          <div class="topup-sp text-gold">2,000</div>
          <div class="topup-sp-label">SEO Points</div>
          <div class="topup-price">NT$ 700</div>
          <div class="topup-unit-price">NT$0.35 / SP</div>
        </div>
        <div class="topup-card" onclick="selectTopup(this, 5000, 1500)">
          <div class="topup-sp text-gold">5,000</div>
          <div class="topup-sp-label">SEO Points</div>
          <div class="topup-price">NT$ 1,500</div>
          <div class="topup-unit-price">NT$0.30 / SP</div>
        </div>
      </div>

      <!-- Custom amount -->
      <div class="custom-topup fade-up">
        <h4>自訂加購金額</h4>
        <div class="custom-topup-row">
          <div class="custom-topup-field">
            <label for="customSP">欲購買 SP 數量</label>
            <input type="number" id="customSP" class="input" placeholder="例如：1000" min="100" step="100" oninput="calcCustomTopup()">
          </div>
          <div class="custom-topup-field">
            <label>預估金額</label>
            <input type="text" id="customPrice" class="input" placeholder="自動計算" readonly>
          </div>
          <button class="btn btn-primary seismic-shake" onclick="customTopup()" style="white-space:nowrap;height:fit-content;">加購</button>
        </div>
        <div class="custom-topup-result" id="customResult" style="display:none">
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="M12 8v4l2 2"/></svg>
          <span id="customResultText"></span>
        </div>
      </div>

      <!-- Payment Methods -->
      <div class="fade-up">
        <h3 style="margin-bottom:var(--sp-6)">選擇付款方式</h3>
        <div class="payment-methods">
          <div class="payment-method selected" onclick="selectPayment(this, 'credit-card')">
            <div class="payment-method-icon">
              <svg width="22" height="22" fill="none" stroke="var(--gold-200)" stroke-width="2" viewBox="0 0 24 24"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>
            </div>
            <span class="payment-method-name">信用卡</span>
            <div class="payment-method-radio"></div>
          </div>
          <div class="payment-method" onclick="selectPayment(this, 'line-pay')">
            <div class="payment-method-icon">
              <svg width="22" height="22" fill="none" stroke="var(--success)" stroke-width="2" viewBox="0 0 24 24"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>
            </div>
            <span class="payment-method-name">行動支付</span>
            <div class="payment-method-radio"></div>
          </div>
          <div class="payment-method" onclick="selectPayment(this, 'convenience-store')">
            <div class="payment-method-icon">
              <svg width="22" height="22" fill="none" stroke="var(--gold-300)" stroke-width="2" viewBox="0 0 24 24"><path d="M3 3h18v4H3zM3 10h18v4H3zM3 17h18v4H3z"/></svg>
            </div>
            <span class="payment-method-name">超商繳費</span>
            <div class="payment-method-radio"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <hr class="divider">

  <!-- ═══════ 4. Billing History ═══════ -->
  <section class="section" id="history">
    <div class="container">
      <div class="section-header fade-up">
        <div class="section-badge">HISTORY</div>
        <h2>帳單<span class="text-gold">記錄</span></h2>
        <p>完整記錄每一筆使用與付款明細</p>
      </div>

      <div class="billing-table-wrap fade-up">
        <table class="billing-table">
          <thead>
            <tr>
              <th>日期</th>
              <th>項目</th>
              <th>SP 使用量</th>
              <th>金額 (TWD)</th>
              <th>狀態</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>2026-02-01</td>
              <td>2 月份方案月費 — 專業版</td>
              <td>2,000 SP（含）</td>
              <td>NT$ 899</td>
              <td><span class="status-paid">&#10003; 已付</span></td>
            </tr>
            <tr>
              <td>2026-01-31</td>
              <td>1 月份超額使用結算</td>
              <td>835 SP</td>
              <td>NT$ 251</td>
              <td><span class="status-paid">&#10003; 已付</span></td>
            </tr>
            <tr>
              <td>2026-01-15</td>
              <td>加購 SEO Points</td>
              <td>+2,000 SP</td>
              <td>NT$ 700</td>
              <td><span class="status-paid">&#10003; 已付</span></td>
            </tr>
            <tr>
              <td>2026-01-01</td>
              <td>1 月份方案月費 — 專業版</td>
              <td>2,000 SP（含）</td>
              <td>NT$ 899</td>
              <td><span class="status-paid">&#10003; 已付</span></td>
            </tr>
            <tr>
              <td>2026-02-28</td>
              <td>2 月份超額使用（預估）</td>
              <td>253 SP</td>
              <td>NT$ 76</td>
              <td><span class="status-pending">&#9679; 待付</span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <p style="text-align:center;color:var(--text-muted);font-size:0.82rem;margin-top:var(--sp-6);line-height:1.8;">
        帳單於每月最後一日結算，帳單通知將寄至您的註冊信箱。<br>
        如有帳單疑問，請聯繫客服團隊。
      </p>
    </div>
  </section>

  <hr class="divider">

  <!-- ═══════ 5. Auto-Renew Settings ═══════ -->
  <section class="section" id="settings">
    <div class="container">
      <div class="section-header fade-up">
        <div class="section-badge">SETTINGS</div>
        <h2>自動續約<span class="text-gold">設定</span></h2>
        <p>管理自動加購與帳單通知偏好</p>
      </div>

      <div class="settings-card fade-up" style="max-width:800px;margin:0 auto;">
        <!-- Auto-renew toggle -->
        <div class="setting-row">
          <div class="setting-info">
            <h4>自動續約方案</h4>
            <p>每月自動續約目前的後付制方案，不中斷服務。</p>
          </div>
          <div class="setting-control">
            <label class="toggle">
              <input type="checkbox" id="autoRenew" checked onchange="toggleSetting('autoRenew', this.checked)">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <!-- Auto top-up -->
        <div class="setting-row">
          <div class="setting-info">
            <h4>自動加購 SEO Points</h4>
            <p>當帳戶 SP 餘額低於設定值時，自動加購指定數量的 SP。</p>
            <div class="setting-inline" id="autoTopupConfig">
              <span>餘額低於</span>
              <input type="number" class="input" id="autoTopupThreshold" value="200" min="50" step="50">
              <span>SP 時，自動加購</span>
              <input type="number" class="input" id="autoTopupAmount" value="1000" min="100" step="100">
              <span>SP</span>
            </div>
          </div>
          <div class="setting-control">
            <label class="toggle">
              <input type="checkbox" id="autoTopup" onchange="toggleSetting('autoTopup', this.checked)">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <!-- Billing notification -->
        <div class="setting-row">
          <div class="setting-info">
            <h4>帳單通知信箱</h4>
            <p>帳單結算後，自動寄送帳單通知到指定信箱。</p>
            <div class="email-input-row">
              <input type="email" class="input" id="billingEmail" placeholder="your@email.com">
              <button class="btn btn-sm btn-secondary" onclick="saveEmail()">儲存</button>
            </div>
          </div>
          <div class="setting-control">
            <label class="toggle">
              <input type="checkbox" id="emailNotify" checked onchange="toggleSetting('emailNotify', this.checked)">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <!-- Usage alert -->
        <div class="setting-row">
          <div class="setting-info">
            <h4>用量警示</h4>
            <p>當本月使用量達到信用額度的 80% 時發送提醒通知。</p>
          </div>
          <div class="setting-control">
            <label class="toggle">
              <input type="checkbox" id="usageAlert" checked onchange="toggleSetting('usageAlert', this.checked)">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </div>
    </div>
  </section>


  <!-- ═══════ Confirm Modal ═══════ -->
  <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
    <div class="modal" onclick="event.stopPropagation()">
      <button class="modal-close" onclick="closeModalDirect()">&times;</button>
      <h3 id="modalTitle">確認加購</h3>
      <div class="modal-summary">
        <div class="modal-summary-row">
          <span class="label">商品</span>
          <span class="value" id="modalProduct">SEO Points 加購</span>
        </div>
        <div class="modal-summary-row">
          <span class="label">數量</span>
          <span class="value" id="modalQty">2,000 SP</span>
        </div>
        <div class="modal-summary-row">
          <span class="label">付款方式</span>
          <span class="value" id="modalPayment">信用卡</span>
        </div>
        <div class="modal-summary-row total">
          <span class="label">應付金額</span>
          <span class="value" id="modalTotal">NT$ 700</span>
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn btn-secondary" onclick="closeModalDirect()">取消</button>
        <button class="btn btn-primary seismic-shake" onclick="confirmPurchase()">確認付款</button>
      </div>
    </div>
  </div>


  <!-- ═══════ Footer ═══════ -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-brand">
          <a href="/" class="nav-brand" style="margin-bottom:var(--sp-3)">
            <img src="/favicon.svg" alt="SEOBAIKE" width="28" height="28">
            <span class="seo">SEO</span><span class="baike">BAIKE</span>
          </a>
          <p>小路光有限公司（統編 60475510）<br>AI 平台 — AI 界的 App Store</p>
        </div>
        <div class="footer-col">
          <h4>產品</h4>
          <a href="/features">平台功能</a>
          <a href="/pricing">方案定價</a>
          <a href="/billing">帳單</a>
          <a href="/marketplace">市集</a>
          <a href="/docs">技術文件</a>
        </div>
        <div class="footer-col">
          <h4>公司</h4>
          <a href="/about">關於我們</a>
          <a href="/contact">聯繫我們</a>
          <a href="/privacy">隱私權政策</a>
          <a href="/terms">服務條款</a>
        </div>
        <div class="footer-col">
          <h4>資源</h4>
          <a href="/docs">快速開始</a>
          <a href="/blog">部落格</a>
          <a href="/docs">常見問題</a>
          <a href="/status">系統狀態</a>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025-2026 小路光有限公司（統編 60475510）</p>
        <p>aiforseo.vip</p>
      </div>
      <div class="footer-disclaimer">
        本平台由小路光有限公司（統編 60475510）營運。AI 服務結果僅供參考，不構成任何形式之保證或承諾。使用本服務即表示同意<a href="/terms">服務條款</a>及<a href="/privacy">隱私權政策</a>。台灣專利申請案號 115100981。
      </div>
    </div>
  </footer>


  <!-- ═══════ Scripts ═══════ -->
  <script>
    /* ── Scroll fade-in observer ── */
    const obs = new IntersectionObserver((entries) => {
      entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
    }, { threshold: 0.08 });
    document.querySelectorAll('.fade-up').forEach(el => obs.observe(el));

    /* ── Nav scroll effect ── */
    window.addEventListener('scroll', () => {
      const nav = document.querySelector('.nav');
      if (nav) nav.classList.toggle('scrolled', window.scrollY > 20);
    });

    /* ── Hamburger menu ── */
    function toggleMenu() {
      document.querySelector('.nav-hamburger')?.classList.toggle('active');
      document.querySelector('.mobile-overlay')?.classList.toggle('open');
      document.body.style.overflow = document.querySelector('.mobile-overlay.open') ? 'hidden' : '';
    }

    /* ── State ── */
    let selectedTopup = { sp: 0, price: 0 };
    let selectedPaymentMethod = 'credit-card';
    const paymentLabels = {
      'credit-card': '信用卡',
      'line-pay': '行動支付',
      'convenience-store': '超商繳費'
    };

    /* ── Select topup package ── */
    function selectTopup(el, sp, price) {
      document.querySelectorAll('.topup-card').forEach(c => c.classList.remove('selected'));
      el.classList.add('selected');
      selectedTopup = { sp, price };
      openTopupModal(sp, price);
    }

    /* ── Select payment method ── */
    function selectPayment(el, method) {
      document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
      el.classList.add('selected');
      selectedPaymentMethod = method;
    }

    /* ── Custom topup calc ── */
    function calcCustomTopup() {
      const sp = parseInt(document.getElementById('customSP').value) || 0;
      const priceEl = document.getElementById('customPrice');
      const resultEl = document.getElementById('customResult');
      const resultText = document.getElementById('customResultText');

      if (sp >= 100) {
        let unitPrice = 0.40;
        if (sp >= 5000) unitPrice = 0.30;
        else if (sp >= 2000) unitPrice = 0.35;

        const total = Math.round(sp * unitPrice);
        priceEl.value = 'NT$ ' + total.toLocaleString();
        resultEl.style.display = 'flex';
        resultText.textContent = sp.toLocaleString() + ' SP = NT$ ' + total.toLocaleString() + '（單價 NT$' + unitPrice.toFixed(2) + '/SP）';
      } else {
        priceEl.value = '';
        resultEl.style.display = 'none';
      }
    }

    /* ── Custom topup action ── */
    function customTopup() {
      const sp = parseInt(document.getElementById('customSP').value) || 0;
      if (sp < 100) {
        alert('最低加購數量為 100 SP');
        return;
      }
      let unitPrice = 0.40;
      if (sp >= 5000) unitPrice = 0.30;
      else if (sp >= 2000) unitPrice = 0.35;
      const total = Math.round(sp * unitPrice);
      openTopupModal(sp, total);
    }

    /* ── Open topup confirm modal ── */
    function openTopupModal(sp, price) {
      document.getElementById('modalTitle').textContent = '確認加購 SEO Points';
      document.getElementById('modalProduct').textContent = 'SEO Points 加購';
      document.getElementById('modalQty').textContent = sp.toLocaleString() + ' SP';
      document.getElementById('modalPayment').textContent = paymentLabels[selectedPaymentMethod] || '信用卡';
      document.getElementById('modalTotal').textContent = 'NT$ ' + price.toLocaleString();
      selectedTopup = { sp, price };
      document.getElementById('modalOverlay').classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    /* ── Open plan modal ── */
    function openModal(plan) {
      const plans = {
        'professional': { name: '專業版方案（月付）', price: 899, sp: '2,000 SP / 月' }
      };
      const p = plans[plan];
      if (!p) return;
      document.getElementById('modalTitle').textContent = '確認訂閱方案';
      document.getElementById('modalProduct').textContent = p.name;
      document.getElementById('modalQty').textContent = p.sp;
      document.getElementById('modalPayment').textContent = paymentLabels[selectedPaymentMethod] || '信用卡';
      document.getElementById('modalTotal').textContent = 'NT$ ' + p.price.toLocaleString();
      selectedTopup = { sp: 2000, price: p.price };
      document.getElementById('modalOverlay').classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    /* ── Close modal ── */
    function closeModal(e) {
      if (e.target === document.getElementById('modalOverlay')) {
        closeModalDirect();
      }
    }
    function closeModalDirect() {
      document.getElementById('modalOverlay').classList.remove('open');
      document.body.style.overflow = '';
    }

    /* ── Confirm purchase (simulated) ── */
    function confirmPurchase() {
      const overlay = document.getElementById('modalOverlay');
      const modal = overlay.querySelector('.modal');
      const originalHTML = modal.innerHTML;

      modal.innerHTML = `
        <div style="text-align:center;padding:var(--sp-8) 0;">
          <div style="width:64px;height:64px;border-radius:50%;background:rgba(52,208,88,0.1);display:flex;align-items:center;justify-content:center;margin:0 auto var(--sp-4);font-size:2rem;color:var(--success);">&#10003;</div>
          <h3 style="margin-bottom:var(--sp-3);">付款成功</h3>
          <p style="color:var(--text-muted);font-size:0.92rem;line-height:1.8;margin-bottom:var(--sp-6);">
            已成功加購 ${selectedTopup.sp.toLocaleString()} SP<br>
            付款金額：NT$ ${selectedTopup.price.toLocaleString()}<br>
            SEO Points 已即時入帳。
          </p>
          <button class="btn btn-primary" onclick="location.reload()">完成</button>
        </div>
      `;

      /* Update balance display (simulated) */
      try {
        const bal = document.getElementById('spBalance');
        const current = parseInt(bal.textContent.replace(/,/g, '')) || 0;
        bal.textContent = (current + selectedTopup.sp).toLocaleString();
      } catch(e) {}
    }

    /* ── Toggle settings ── */
    function toggleSetting(key, value) {
      try {
        if (window.localStorage) {
          localStorage.setItem('seobaike_' + key, value ? '1' : '0');
        }
      } catch(e) {}

      /* Show inline config for auto-topup */
      if (key === 'autoTopup') {
        const config = document.getElementById('autoTopupConfig');
        if (config) {
          config.style.opacity = value ? '1' : '0.4';
          config.querySelectorAll('input').forEach(i => i.disabled = !value);
        }
      }
    }

    /* ── Save email ── */
    function saveEmail() {
      const email = document.getElementById('billingEmail').value.trim();
      if (!email || !email.includes('@')) {
        alert('請輸入有效的電子郵件地址');
        return;
      }
      try {
        if (window.localStorage) {
          localStorage.setItem('seobaike_billing_email', email);
        }
      } catch(e) {}
      alert('帳單通知信箱已儲存：' + email);
    }

    /* ── Init: restore settings from localStorage ── */
    (function initSettings() {
      try {
        const autoTopupConfig = document.getElementById('autoTopupConfig');
        const autoTopupToggle = document.getElementById('autoTopup');
        if (autoTopupConfig && autoTopupToggle && !autoTopupToggle.checked) {
          autoTopupConfig.style.opacity = '0.4';
          autoTopupConfig.querySelectorAll('input').forEach(i => i.disabled = true);
        }
        const savedEmail = localStorage.getItem('seobaike_billing_email');
        if (savedEmail) {
          document.getElementById('billingEmail').value = savedEmail;
        }
      } catch(e) {}
    })();
  </script>

  <!-- Page View Tracking -->
  <script>
  (function(){
    try {
      var cfg = window.__SEOBAIKE__ || {};
      var sUrl = cfg.supabaseUrl || 'https://vmyrivxxibqydccurxug.supabase.co';
      var sKey = cfg.anonKey || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZteXJpdnh4aWJxeWRjY3VyeHVnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwNDAwMjksImV4cCI6MjA4NTYxNjAyOX0.iBV-23LGdm_uKffAExgqSV34-NWoAyv8_-M_cJQZ8Gg';
      fetch(sUrl + '/rest/v1/page_views', {
        method: 'POST',
        headers: { 'Content-Type':'application/json', 'apikey':sKey, 'Authorization':'Bearer '+sKey, 'Prefer':'return=minimal' },
        body: JSON.stringify({ path: location.pathname, referrer: document.referrer || null, user_agent: navigator.userAgent })
      }).catch(function(){});
    } catch(e){}
  })();
  </script>

  <script src="/seobaike-widget.js"></script>
  <script src="/assets/premium-fx.js"></script>
</body>
</html>
