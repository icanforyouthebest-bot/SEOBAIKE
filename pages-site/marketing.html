<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>行銷指揮中心 — SEOBAIKE</title>
  <meta name="description" content="SEOBAIKE 行銷指揮中心：AI 幫你做行銷，全自動。SEO、社群、內容、廣告、Email、數據分析。">
  <meta property="og:title" content="行銷指揮中心 — SEOBAIKE">
  <meta property="og:description" content="AI 幫你做行銷，全自動。">
  <meta property="og:image" content="/og-image.png">
  <meta property="og:type" content="website">
  <meta name="theme-color" content="#06060f">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/og-image.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="preconnect" href="https://vmyrivxxibqydccurxug.supabase.co">
  <link rel="stylesheet" href="/assets/design-system.css">
  <link rel="stylesheet" href="/assets/premium-fx.css">
  <style>
    /* ── Hero ── */
    .hero {
      padding: 140px 0 80px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .hero::before {
      content: '';
      position: absolute;
      top: -200px;
      left: 50%;
      transform: translateX(-50%);
      width: 800px;
      height: 800px;
      background: radial-gradient(circle, rgba(232,133,12,0.06) 0%, transparent 65%);
      pointer-events: none;
    }
    .hero h1 { margin-bottom: var(--sp-4); }
    .hero-sub {
      font-size: 1.15rem;
      color: var(--text-muted);
      max-width: 520px;
      margin: 0 auto var(--sp-8);
      line-height: 1.8;
    }
    .hero-actions {
      display: flex;
      justify-content: center;
      gap: var(--sp-4);
      flex-wrap: wrap;
    }

    /* ── Agent Cards ── */
    .agent-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--sp-6); }
    .agent-card {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: var(--sp-8);
      position: relative;
      overflow: hidden;
      transition: all var(--duration-normal) var(--ease-out);
    }
    .agent-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 3px;
      background: var(--gold-gradient);
      opacity: 0;
      transition: opacity var(--duration-normal);
    }
    .agent-card:hover {
      border-color: var(--border-hover);
      transform: translateY(-3px);
      box-shadow: var(--shadow-gold);
    }
    .agent-card:hover::before { opacity: 1; }
    .agent-icon-wrap {
      width: 52px; height: 52px;
      border-radius: var(--radius-md);
      display: flex; align-items: center; justify-content: center;
      background: rgba(232,133,12,0.08);
      margin-bottom: var(--sp-4);
    }
    .agent-card h3 { font-size: 1.15rem; margin-bottom: var(--sp-2); }
    .agent-card p { font-size: 0.88rem; color: var(--text-muted); margin-bottom: var(--sp-4); }
    .agent-caps {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .agent-caps li {
      padding: 3px 0;
      font-size: 0.82rem;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .agent-caps li::before {
      content: '';
      width: 5px; height: 5px;
      border-radius: 50%;
      background: var(--gold-300);
      flex-shrink: 0;
    }

    /* ── Dashboard Preview ── */
    .dash-panel {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: var(--sp-8);
      position: relative;
      overflow: hidden;
    }
    .dash-panel::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 2px;
      background: var(--gold-gradient);
    }
    .dash-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--sp-8);
    }
    .dash-title {
      font-size: 1rem;
      font-weight: 700;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .dash-live-dot {
      width: 8px; height: 8px;
      border-radius: 50%;
      background: var(--success);
      animation: pulse 2s infinite;
    }
    .dash-time {
      font-size: 0.75rem;
      color: var(--text-muted);
      font-family: var(--font-mono);
    }
    .metric-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--sp-4);
    }
    .metric-box {
      background: rgba(255,255,255,0.02);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      padding: var(--sp-5);
      text-align: center;
      transition: border-color var(--duration-fast);
    }
    .metric-box:hover { border-color: var(--border-hover); }
    .metric-icon { font-size: 1.5rem; margin-bottom: var(--sp-2); }
    .metric-val {
      font-size: 1.8rem;
      font-weight: 900;
      color: var(--text-primary);
      font-family: var(--font-mono);
      line-height: 1.2;
      margin-bottom: 2px;
    }
    .metric-val.loading { color: var(--text-muted); font-size: 1rem; }
    .metric-label {
      font-size: 0.72rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .dash-chart-area {
      margin-top: var(--sp-6);
      background: rgba(255,255,255,0.015);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      padding: var(--sp-6);
      min-height: 160px;
      display: flex;
      align-items: flex-end;
      gap: 6px;
      justify-content: space-between;
    }
    .chart-bar {
      flex: 1;
      background: var(--gold-gradient);
      border-radius: 4px 4px 0 0;
      opacity: 0.7;
      transition: opacity var(--duration-fast);
      min-width: 8px;
    }
    .chart-bar:hover { opacity: 1; }

    /* ── Task Center ── */
    .task-panel {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: var(--sp-8);
      position: relative;
      overflow: hidden;
    }
    .task-panel::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--gold-300), var(--gold-100));
    }
    .task-form {
      display: grid;
      grid-template-columns: 200px 1fr auto;
      gap: var(--sp-3);
      align-items: end;
    }
    .task-form label {
      display: block;
      font-size: 0.72rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 6px;
      font-weight: 600;
    }
    .task-log {
      margin-top: var(--sp-5);
      background: rgba(0,0,0,0.2);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      padding: var(--sp-4) var(--sp-5);
      max-height: 200px;
      overflow-y: auto;
      font-family: var(--font-mono);
      font-size: 0.78rem;
      line-height: 1.9;
      display: none;
    }
    .task-log.visible { display: block; }
    .log-entry { padding: 2px 0; border-bottom: 1px solid rgba(255,255,255,0.03); }
    .log-entry:last-child { border-bottom: none; }
    .log-time { color: var(--text-muted); }
    .log-agent { color: var(--gold-200); font-weight: 600; }
    .log-ok { color: var(--success); }
    .log-err { color: var(--danger); }
    .log-msg { color: var(--text-secondary); }

    /* ── CTA Banner ── */
    .cta-banner {
      text-align: center;
      padding: var(--sp-16) var(--sp-6);
      position: relative;
    }
    .cta-banner::before {
      content: '';
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 600px; height: 400px;
      background: radial-gradient(circle, rgba(232,133,12,0.06) 0%, transparent 70%);
      pointer-events: none;
    }
    .cta-banner h2 { margin-bottom: var(--sp-3); }
    .cta-banner p { color: var(--text-muted); margin-bottom: var(--sp-8); max-width: 480px; margin-left: auto; margin-right: auto; }

    /* ── Responsive ── */
    @media (max-width: 1024px) {
      .agent-grid { grid-template-columns: repeat(2, 1fr); }
      .metric-grid { grid-template-columns: repeat(2, 1fr); }
      .task-form { grid-template-columns: 1fr; }
    }
    @media (max-width: 768px) {
      .hero { padding: 110px 0 60px; }
      .agent-grid { grid-template-columns: 1fr; }
      .metric-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 480px) {
      .metric-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body class="page-top">

  <!-- Navigation -->
  <nav class="nav">
    <a href="/" class="nav-brand">
      <img src="/favicon.svg" alt="SEOBAIKE" width="34" height="34">
      <span><span class="seo">SEO</span><span class="baike">BAIKE</span></span>
    </a>
    <ul class="nav-links">
      <li><a href="/">首頁</a></li>
      <li><a href="/features">功能</a></li>
      <li><a href="/marketplace">市集</a></li>
      <li><a href="/marketing" class="active">行銷</a></li>
      <li><a href="/pricing">方案</a></li>
      <li><a href="/about">關於</a></li>
      <li><a href="/billing" class="nav-link">帳單</a></li>
      <li><a href="/login" class="nav-cta">登入</a></li>
    </ul>
    <button class="nav-hamburger" onclick="toggleMenu()" aria-label="選單">
      <span></span><span></span><span></span>
    </button>
  </nav>

  <!-- Mobile Overlay -->
  <div class="mobile-overlay">
    <button class="mobile-close" onclick="toggleMenu()">&times;</button>
    <a href="/" onclick="toggleMenu()">首頁</a>
    <a href="/features" onclick="toggleMenu()">功能</a>
    <a href="/marketplace" onclick="toggleMenu()">市集</a>
    <a href="/marketing" onclick="toggleMenu()">行銷</a>
    <a href="/pricing" onclick="toggleMenu()">方案</a>
    <a href="/about" onclick="toggleMenu()">關於</a>
    <a href="/billing" onclick="toggleMenu()">帳單</a>
    <a href="/login" onclick="toggleMenu()">登入</a>
  </div>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <div class="section-badge">MARKETING HUB</div>
      <h1><span class="text-gold">行銷指揮中心</span></h1>
      <p class="hero-sub">AI 幫你做行銷，全自動。<br>SEO、社群、內容、廣告、Email、數據 — 一站搞定。</p>
      <div class="hero-actions">
        <a href="#agents" class="btn btn-primary btn-lg">探索 AI 行銷</a>
        <a href="#dashboard" class="btn btn-secondary btn-lg">查看數據</a>
      </div>
    </div>
  </section>

  <!-- Divider -->
  <hr class="divider">

  <!-- AI Marketing Agents -->
  <section class="section" id="agents">
    <div class="container">
      <div class="section-header fade-up">
        <div class="section-badge">AI AGENTS</div>
        <h2>AI 行銷軍團</h2>
        <p>六大 AI Agent 各司其職，涵蓋完整行銷流程。</p>
      </div>
      <div class="agent-grid">

        <!-- SEO -->
        <div class="agent-card fade-up">
          <div class="agent-icon-wrap">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#e8850c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          </div>
          <h3>SEO 優化</h3>
          <p>全自動搜尋引擎優化，從關鍵字研究到排名追蹤。</p>
          <ul class="agent-caps">
            <li>關鍵字機會挖掘</li>
            <li>排名即時追蹤</li>
            <li>技術 SEO 審計</li>
            <li>競爭對手分析</li>
          </ul>
        </div>

        <!-- Social -->
        <div class="agent-card fade-up">
          <div class="agent-icon-wrap" style="background:rgba(52,208,88,0.08);">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#34d058" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
          </div>
          <h3>社群媒體管理</h3>
          <p>多平台同步發文，互動管理一把抓。</p>
          <ul class="agent-caps">
            <li>多平台同步發文</li>
            <li>自動回覆互動</li>
            <li>粉絲增長分析</li>
            <li>最佳發文時段建議</li>
          </ul>
        </div>

        <!-- Content -->
        <div class="agent-card fade-up">
          <div class="agent-icon-wrap" style="background:rgba(88,166,255,0.08);">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#58a6ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
          </div>
          <h3>內容行銷</h3>
          <p>AI 自動生成高品質文章、社群貼文、電子報。</p>
          <ul class="agent-caps">
            <li>SEO 文章自動生成</li>
            <li>社群貼文排程</li>
            <li>電子報撰寫</li>
            <li>多語系內容翻譯</li>
          </ul>
        </div>

        <!-- Ads -->
        <div class="agent-card fade-up">
          <div class="agent-icon-wrap" style="background:rgba(240,180,41,0.08);">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f0b429" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/></svg>
          </div>
          <h3>廣告投放</h3>
          <p>智慧廣告管理，自動優化投放策略與預算。</p>
          <ul class="agent-caps">
            <li>跨平台廣告管理</li>
            <li>受眾精準定位</li>
            <li>預算自動分配</li>
            <li>素材 A/B 測試</li>
          </ul>
        </div>

        <!-- Email -->
        <div class="agent-card fade-up">
          <div class="agent-icon-wrap" style="background:rgba(198,120,221,0.08);">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#c678dd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
          </div>
          <h3>Email 行銷</h3>
          <p>自動化郵件行銷流程，從名單到轉換。</p>
          <ul class="agent-caps">
            <li>電子報自動發送</li>
            <li>名單分群管理</li>
            <li>開信率追蹤</li>
            <li>自動化漏斗流程</li>
          </ul>
        </div>

        <!-- Analytics -->
        <div class="agent-card fade-up">
          <div class="agent-icon-wrap" style="background:rgba(248,81,73,0.08);">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f85149" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
          </div>
          <h3>數據分析</h3>
          <p>即時數據儀表板，深入洞察行銷成效。</p>
          <ul class="agent-caps">
            <li>即時流量監控</li>
            <li>轉換漏斗分析</li>
            <li>A/B 測試報告</li>
            <li>ROI 計算</li>
          </ul>
        </div>

      </div>
    </div>
  </section>

  <!-- Dashboard Preview -->
  <section class="section" id="dashboard" style="background:rgba(12,12,29,0.5);">
    <div class="container">
      <div class="section-header fade-up">
        <div class="section-badge">LIVE DATA</div>
        <h2>行銷數據儀表板</h2>
        <p>即時掌握所有行銷指標，數據驅動決策。</p>
      </div>
      <div class="dash-panel fade-up">
        <div class="dash-header">
          <div class="dash-title">
            <div class="dash-live-dot"></div>
            行銷數據總覽
          </div>
          <div class="dash-time">更新: <span id="dashTime">--:--:--</span></div>
        </div>
        <div class="metric-grid">
          <div class="metric-box">
            <div class="metric-icon">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#e8850c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
            </div>
            <div class="metric-val loading" id="metricViews">--</div>
            <div class="metric-label">頁面瀏覽</div>
          </div>
          <div class="metric-box">
            <div class="metric-icon">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#34d058" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
            </div>
            <div class="metric-val loading" id="metricContacts">--</div>
            <div class="metric-label">聯繫人</div>
          </div>
          <div class="metric-box">
            <div class="metric-icon">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#c678dd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            </div>
            <div class="metric-val loading" id="metricEmails">--</div>
            <div class="metric-label">Email 發送</div>
          </div>
          <div class="metric-box">
            <div class="metric-icon">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#58a6ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
            </div>
            <div class="metric-val loading" id="metricEvents">--</div>
            <div class="metric-label">事件追蹤</div>
          </div>
        </div>
        <!-- Mock Chart -->
        <div class="dash-chart-area" id="chartArea"></div>
      </div>
    </div>
  </section>

  <!-- Task Center -->
  <section class="section" id="tasks">
    <div class="container">
      <div class="section-header fade-up">
        <div class="section-badge">TASK CENTER</div>
        <h2>行銷任務中心</h2>
        <p>建立行銷任務，指派給 AI Agent 自動執行。</p>
      </div>
      <div class="task-panel fade-up">
        <h3 style="font-size:1rem;margin-bottom:var(--sp-2);">建立新任務</h3>
        <p style="font-size:0.85rem;color:var(--text-muted);margin-bottom:var(--sp-6);">選擇 Agent 並輸入任務描述，系統將自動派遣至對應服務。</p>
        <div class="task-form" id="taskForm">
          <div>
            <label for="taskAgent">目標 Agent</label>
            <select class="input" id="taskAgent">
              <option value="seo">SEO 優化</option>
              <option value="social">社群媒體管理</option>
              <option value="content">內容行銷</option>
              <option value="ads">廣告投放</option>
              <option value="email">Email 行銷</option>
              <option value="analytics">數據分析</option>
            </select>
          </div>
          <div>
            <label for="taskInput">任務描述</label>
            <input class="input" type="text" id="taskInput" placeholder="例：分析本月 SEO 排名變化並產出報告">
          </div>
          <div>
            <label>&nbsp;</label>
            <button class="btn btn-primary" id="taskSend" onclick="dispatchTask()">派遣任務</button>
          </div>
        </div>
        <div class="task-log" id="taskLog">
          <div class="log-entry">
            <span class="log-time">[SYSTEM]</span> <span class="log-msg">任務中心已就緒。等待指令...</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="section">
    <div class="container">
      <div class="cta-banner fade-up">
        <h2><span class="text-gold">開始 AI 行銷</span></h2>
        <p>讓 AI 接管繁瑣的行銷工作，專注在策略與創意。</p>
        <div style="display:flex;justify-content:center;gap:var(--sp-4);flex-wrap:wrap;">
          <a href="/pricing" class="btn btn-primary btn-lg">查看方案</a>
          <a href="/features" class="btn btn-secondary btn-lg">了解更多</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-brand">
          <a href="/" class="nav-brand" style="margin-bottom:var(--sp-4);">
            <img src="/favicon.svg" alt="SEOBAIKE" width="34" height="34">
            <span><span class="seo">SEO</span><span class="baike">BAIKE</span></span>
          </a>
          <p>AI 行銷指揮中心。<br>由小路光有限公司（統編 60475510）開發與維運。</p>
        </div>
        <div class="footer-col">
          <h4>產品</h4>
          <a href="/features">功能總覽</a>
          <a href="/pricing">方案與定價</a>
          <a href="/marketplace">AI 市集</a>
          <a href="/marketing">行銷中心</a>
          <a href="/billing">帳單管理</a>
        </div>
        <div class="footer-col">
          <h4>公司</h4>
          <a href="/about">關於我們</a>
          <a href="/contact">聯繫我們</a>
          <a href="/privacy">隱私權政策</a>
          <a href="/terms">服務條款</a>
        </div>
        <div class="footer-col">
          <h4>支援</h4>
          <a href="/docs">常見問題</a>
          <a href="/bots">協作機器人</a>
          <a href="/contact">聯絡我們</a>
          <a href="/status">系統狀態</a>
        </div>
      </div>
      <div class="footer-bottom">
        <div>&copy; 2026 小路光有限公司（統編 60475510）</div>
        <div>aiforseo.vip</div>
      </div>
      <div class="footer-disclaimer">
        本平台由小路光有限公司（統編 60475510）營運。AI 服務結果僅供參考，不構成任何形式之保證或承諾。使用本服務即表示同意<a href="/terms">服務條款</a>及<a href="/privacy">隱私權政策</a>。台灣專利申請案號 115100981。
      </div>
    </div>
  </footer>

  <script>
    /* ═══════════ Config ═══════════ */
    var SUPABASE_URL = 'https://vmyrivxxibqydccurxug.supabase.co';
    var SUPABASE_ANON = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZteXJpdnh4aWJxeWRjY3VyeHVnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwNDAwMjksImV4cCI6MjA4NTYxNjAyOX0.iBV-23LGdm_uKffAExgqSV34-NWoAyv8_-M_cJQZ8Gg';

    /* ═══════════ Design System Scripts ═══════════ */
    var obs = new IntersectionObserver(function(entries) {
      entries.forEach(function(e) { if (e.isIntersecting) e.target.classList.add('visible'); });
    }, { threshold: 0.08 });
    document.querySelectorAll('.fade-up').forEach(function(el) { obs.observe(el); });

    window.addEventListener('scroll', function() {
      var nav = document.querySelector('.nav');
      if (nav) nav.classList.toggle('scrolled', window.scrollY > 20);
    });

    function toggleMenu() {
      document.querySelector('.nav-hamburger').classList.toggle('active');
      document.querySelector('.mobile-overlay').classList.toggle('open');
    }

    /* ═══════════ Mock Chart ═══════════ */
    (function() {
      var area = document.getElementById('chartArea');
      var heights = [35,52,40,68,55,78,62,85,70,92,65,88,72,95,60,80,75,90,58,82,70,88,64,76,83,91,55,73,86,68];
      heights.forEach(function(h) {
        var bar = document.createElement('div');
        bar.className = 'chart-bar';
        bar.style.height = h + 'px';
        area.appendChild(bar);
      });
    })();

    /* ═══════════ Dashboard Time ═══════════ */
    function updateDashTime() {
      document.getElementById('dashTime').textContent = new Date().toLocaleTimeString('zh-TW', { hour12: false });
    }
    updateDashTime();
    setInterval(updateDashTime, 1000);

    /* ═══════════ Live Data ═══════════ */
    function fetchMetrics() {
      fetch(SUPABASE_URL + '/functions/v1/analytics-agent', {
        method: 'GET',
        headers: { 'Authorization': 'Bearer ' + SUPABASE_ANON, 'apikey': SUPABASE_ANON }
      })
      .then(function(res) { return res.json(); })
      .then(function(data) {
        if (data.page_views !== undefined) {
          var el = document.getElementById('metricViews');
          el.textContent = Number(data.page_views).toLocaleString();
          el.classList.remove('loading');
        }
        if (data.contacts !== undefined) {
          var el2 = document.getElementById('metricContacts');
          el2.textContent = Number(data.contacts).toLocaleString();
          el2.classList.remove('loading');
        }
        if (data.newsletters !== undefined) {
          var el3 = document.getElementById('metricEmails');
          el3.textContent = Number(data.newsletters).toLocaleString();
          el3.classList.remove('loading');
        }
        if (data.audit_events !== undefined) {
          var el4 = document.getElementById('metricEvents');
          el4.textContent = Number(data.audit_events).toLocaleString();
          el4.classList.remove('loading');
        }
      })
      .catch(function() {});
    }
    fetchMetrics();
    setInterval(fetchMetrics, 30000);

    /* ═══════════ Task Dispatch ═══════════ */
    function dispatchTask() {
      var agent = document.getElementById('taskAgent').value;
      var task = document.getElementById('taskInput').value.trim();
      var btn = document.getElementById('taskSend');
      if (!task) { addLog('SYSTEM', '請輸入任務描述', 'err'); return; }

      btn.disabled = true;
      btn.textContent = '派遣中...';
      addLog(agent, '派遣任務: ' + task, 'msg');

      fetch(SUPABASE_URL + '/functions/v1/' + agent + '-agent', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer ' + SUPABASE_ANON,
          'apikey': SUPABASE_ANON
        },
        body: JSON.stringify({ action: 'task', task: task, timestamp: new Date().toISOString(), source: 'marketing-hub' })
      })
      .then(function(res) { return res.json().then(function(d) { return { status: res.status, data: d }; }); })
      .then(function(result) {
        if (result.status >= 200 && result.status < 300) {
          addLog(agent, '任務已接受', 'ok');
        } else {
          addLog(agent, '任務被拒絕 (HTTP ' + result.status + ')', 'err');
        }
      })
      .catch(function(err) { addLog(agent, '派遣失敗: ' + err.message, 'err'); })
      .finally(function() {
        btn.disabled = false;
        btn.textContent = '派遣任務';
        document.getElementById('taskInput').value = '';
      });
    }

    function addLog(agent, message, type) {
      var log = document.getElementById('taskLog');
      log.classList.add('visible');
      var entry = document.createElement('div');
      entry.className = 'log-entry';
      var now = new Date().toLocaleTimeString('zh-TW', { hour12: false });
      var cls = type === 'ok' ? 'log-ok' : type === 'err' ? 'log-err' : 'log-msg';
      entry.innerHTML = '<span class="log-time">[' + now + ']</span> <span class="log-agent">[' + escapeHtml(agent) + ']</span> <span class="' + cls + '">' + escapeHtml(message) + '</span>';
      log.appendChild(entry);
      log.scrollTop = log.scrollHeight;
    }

    function escapeHtml(str) {
      var d = document.createElement('div');
      d.appendChild(document.createTextNode(str));
      return d.innerHTML;
    }

    document.getElementById('taskInput').addEventListener('keydown', function(e) {
      if (e.key === 'Enter') { e.preventDefault(); dispatchTask(); }
    });

    /* ═══════════ Page View Tracking ═══════════ */
    (function() {
      try {
        fetch(SUPABASE_URL + '/rest/v1/page_views', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'apikey': SUPABASE_ANON,
            'Authorization': 'Bearer ' + SUPABASE_ANON,
            'Prefer': 'return=minimal'
          },
          body: JSON.stringify({
            path: location.pathname,
            referrer: document.referrer || null,
            user_agent: navigator.userAgent
          })
        }).catch(function() {});
      } catch (e) {}
    })();
  </script>
  <script src="/assets/analytics.js" defer></script>
  <script src="/seobaike-widget.js"></script>
  <script src="/assets/premium-fx.js"></script>
  <script src="/assets/i18n.js"></script>
  <script src="/assets/cookie-consent.js"></script>
</body>
</html>