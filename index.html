<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>SEOBAIKE AI — 總控制台</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Segoe UI',sans-serif; background:#0a0a1a; color:#eee; min-height:100vh; }
.header { background:linear-gradient(135deg,#76b900 0%,#cc785c 50%,#1a1a2e 100%); padding:20px 30px; text-align:center; }
.header h1 { font-size:28px; color:#fff; }
.header p { color:#ccc; margin-top:5px; }
.live { display:inline-block; width:10px; height:10px; border-radius:50%; background:#0f0; animation:pulse 1s infinite; margin-right:8px; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.2} }
@keyframes rotate { from{transform:rotate(0deg)} to{transform:rotate(360deg)} }
.grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:16px; padding:20px 30px; }
.panel { background:#16213e; border:1px solid #333; border-radius:16px; overflow:hidden; transition:all 0.3s; }
.panel:hover { border-color:#76b900; transform:translateY(-3px); box-shadow:0 8px 30px rgba(118,185,0,0.2); }
.panel h3 { padding:12px 16px; background:#1a1a2e; font-size:14px; display:flex; align-items:center; gap:8px; }
.panel iframe { width:100%; height:400px; border:none; }
.panel .badge { padding:3px 8px; border-radius:10px; font-size:10px; font-weight:bold; }
.stats { display:grid; grid-template-columns:repeat(4,1fr); gap:12px; padding:20px 30px; }
.stat { background:#16213e; border:1px solid #333; border-radius:12px; padding:15px; text-align:center; }
.stat .num { font-size:36px; font-weight:bold; color:#76b900; }
.stat .lbl { font-size:11px; color:#888; margin-top:4px; }
.spinner { display:inline-block; width:14px; height:14px; border:2px solid #333; border-top:2px solid #76b900; border-radius:50%; animation:rotate 1s linear infinite; }
.footer { text-align:center; padding:20px; color:#555; font-size:11px; }
.clock { font-size:18px; color:#76b900; font-family:monospace; }
</style>
</head>
<body>

<div class="header">
  <h1><span class="live"></span> SEOBAIKE AI — 雙引擎總控制台</h1>
  <p>SEOBAIKE 主引擎 + 約束引擎 | 專利 115100981 | 小路光有限公司 | <span class="clock" id="clock"></span></p>
</div>

<div class="stats" id="liveStats">
  <div class="stat"><div class="num" id="s-services">0</div><div class="lbl">運行中服務</div></div>
  <div class="stat"><div class="num" id="s-round">0</div><div class="lbl">測試輪次</div></div>
  <div class="stat"><div class="num" id="s-uptime">0</div><div class="lbl">運行秒數</div></div>
  <div class="stat"><div class="num" style="color:#e8850c;" id="s-panels">6</div><div class="lbl">儀表板數量</div></div>
</div>

<div class="grid">
  <div class="panel">
    <h3><span class="spinner"></span> 雙引擎即時測試 <span class="badge" style="background:#76b900;color:#000;">自動 5s</span></h3>
    <iframe src="dual-dashboard.html"></iframe>
  </div>
  <div class="panel">
    <h3><span class="spinner"></span> SEOBAIKE 全系統監控 <span class="badge" style="background:#cc785c;color:#fff;">自動 6s</span></h3>
    <iframe src="http://localhost:7870"></iframe>
  </div>
  <div class="panel">
    <h3><span class="spinner"></span> SEOBAIKE 即時儀表板 <span class="badge" style="background:#e8850c;color:#fff;">自動 3s</span></h3>
    <iframe src="http://localhost:8501"></iframe>
  </div>
  <div class="panel">
    <h3><span class="spinner"></span> 雙引擎聊天介面 <span class="badge" style="background:#76b900;color:#000;">互動式</span></h3>
    <iframe src="nvidia-chat.html"></iframe>
  </div>
  <div class="panel">
    <h3><span class="spinner"></span> SEOBAIKE 開發環境 <span class="badge" style="background:#f37726;color:#fff;">互動式</span></h3>
    <iframe src="http://localhost:8888"></iframe>
  </div>
  <div class="panel">
    <h3><span class="spinner"></span> SEOBAIKE 容器監控 <span class="badge" style="background:#2496ed;color:#fff;">常駐</span></h3>
    <div style="padding:16px;font-family:monospace;font-size:12px;line-height:1.8;height:400px;overflow-y:auto;" id="dockerLog">
      待命中（點擊手動測試）
    </div>
    <div style="padding:8px 16px;"><button onclick="pingDocker()" style="padding:4px 14px;background:#e8850c;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:12px;">手動測試</button></div>
  </div>
</div>

<div class="footer">
  SEOBAIKE AI — 專利 115100981 — 小路光有限公司 — 全系統運行中 — <span id="ft"></span>
</div>

<script>
let startTime = Date.now();
let testRound = 0;

setInterval(() => {
  document.getElementById("clock").textContent = new Date().toLocaleString("zh-TW");
  document.getElementById("s-uptime").textContent = Math.floor((Date.now()-startTime)/1000);
}, 1000);

// Count services
setInterval(() => {
  let count = 0;
  const checks = [
    {url:"http://localhost:7870", name:"全系統監控"},
    {url:"http://localhost:8501", name:"即時儀表板"},
    {url:"http://localhost:8888", name:"開發環境"},
  ];
  let done = 0;
  checks.forEach(c => {
    fetch(c.url, {mode:"no-cors"}).then(() => { count++; done++; if(done===checks.length) document.getElementById("s-services").textContent = count + 4; }).catch(() => { done++; if(done===checks.length) document.getElementById("s-services").textContent = count + 4; });
  });
}, 10000);
document.getElementById("s-services").textContent = "7+";
</script>
<script src="seobaike-config.js"></script>
<script>
// Test round counter
const EP = (window.__SEOBAIKE__ && window.__SEOBAIKE__.supabaseUrl || "https://vmyrivxxibqydccurxug.supabase.co") + "/functions/v1/nvidia-boss";
const KEY = (window.__SEOBAIKE__ && window.__SEOBAIKE__.anonKey) || "";

async function pingDocker() {
  const dl = document.getElementById("dockerLog");
  const ts = new Date().toLocaleTimeString("zh-TW");
  try {
    const r = await fetch(EP, {method:"POST", headers:{"Authorization":"Bearer "+KEY,"Content-Type":"application/json"}, body:JSON.stringify({message:"docker health"})});
    const d = await r.json();
    testRound++;
    document.getElementById("s-round").textContent = testRound;
    dl.innerHTML = '<div style="color:#76b900;">['+ts+'] #'+testRound+' 容器 ping OK — '+((d.reply||"").substring(0,60))+'</div>' + dl.innerHTML;
  } catch(e) {
    dl.innerHTML = '<div style="color:#ff6b6b;">['+ts+'] 容器 ping FAIL — '+e.message+'</div>' + dl.innerHTML;
  }
  if(dl.children.length > 50) dl.lastChild.remove();
}
/* AUTO-POLL REMOVED: pingDocker() and setInterval(pingDocker, 8000) disabled to stop API credit burn */
/* pingDocker(); */
/* setInterval(pingDocker, 8000); */

document.getElementById("ft").textContent = new Date().toLocaleString("zh-TW");
</script>
</body>
</html>
